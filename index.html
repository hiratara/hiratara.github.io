<!DOCTYPE HTML>
<html>

<head>
  <title>Born in Tomakomai city - Top</title>
  <meta name="description" content="A blog for programmer" />
  <meta name="keywords" content="perl,haskell,mathematics" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="./css/style.css" />
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <!-- Google Analytics tracking codes -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-7637699-4', 'hiratara.github.io');
          ga('send', 'pageview');

        </script>
</head>

<body>
        <!-- facebook SDK -->
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=100848266724416";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>
  <div id="main">
    <div id="header">
      <div id="logo">
        <div id="logo_text">
          <h1><a href="./">Born in <span class="logo_colour">Tomakomai</span> city</a></h1>
          <h2>A programmer who loves mathematics</h2>
        </div>
      </div>
      <div id="menubar">
        <ul id="menu">
          <li><a href="./">Home</a></li>
          <li><a href="./about.html">About</a></li>
          <li><a href="./contact.html">Contact</a></li>
          <li><a href="./archive1.html">Archive</a></li>
        </ul>
      </div>
    </div>
    <div id="content_header"></div>
    <div id="site_content">
      <div class="sidebar">
        <h3>Links</h3>
        <ul>
          <li><a href="https://github.com/hiratara">hiratara@github</a></li>
          <li><a href="http://d.hatena.ne.jp/hiratara">hiratara@hatena</a></li>
          <li><a href="http://hiratara.dyndns.org/chaberi">Chaberi Backdoor</a></li>
        </ul>
      </div>
      <div id="content">
        

<div>
  <h1>今日は『第１４回数学カフェ「圏論」』の日です</h1>
<div class="post-info">
    Posted on <a href="./posts/2016-07-02-mathcafe.html">July  2, 2016</a>
    <!-- facebook button -->
    <div class="fb-like" data-href="http://hiratara.github.io/posts/2016-07-02-mathcafe.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
    <!-- Twitter button -->
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiratara.github.io/posts/2016-07-02-mathcafe.html" data-text="今日は『第１４回数学カフェ「圏論」』の日です" data-via="hiratara">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

</div>
<p>
    <p>東大駒場に来てますのでメモを取ります。</p>
<h2 id="圏論とは">圏論とは</h2>
<ul>
<li>圏論の父 S.Mac Lane
<ul>
<li>arrowとdiagramで数学的体系の多くの性質を</li>
<li>可換図式</li>
</ul></li>
<li>今日のテーマ: 位相幾何学とプログラミング</li>
</ul>
<h2 id="圏論の基礎-松森至宏さん">圏論の基礎 / 松森至宏さん</h2>
<ul>
<li>圏が初めての人向け</li>
<li>代数的位相幾何学の文脈から生まれた</li>
<li>自然変換を表現したかった</li>
<li>圏の定義
<ul>
<li><span class="math inline">\(Ob(C)\)</span>, <span class="math inline">\(Hom_c(,)\)</span>, <span class="math inline">\(\circ\)</span></li>
<li><span class="math inline">\(f : X \to Y\)</span></li>
<li><span class="math inline">\(\circ : Hom_C(Y, Z) \times Hom_C(X, Y) \to Hom_C(X, Z)\)</span></li>
<li><span class="math inline">\(1_X \in Hom_C(X, X)\)</span> identity, <span class="math inline">\((h \circ g) \circ f = h \circ (f \circ g)\)</span> composition</li>
</ul></li>
<li><span class="math inline">\(f: X \to Y\)</span>, <span class="math inline">\(X\)</span> domain, <span class="math inline">\(Y\)</span> codomain
<ul>
<li>これがwell-definedになるように <span class="math inline">\(Hom_C(X,Y) \cap Hom_C(X', Y') = \phi\)</span></li>
</ul></li>
<li>例: <span class="math inline">\(Set\)</span>
<ul>
<li><span class="math inline">\(Ob(Set)\)</span> : 集合の集まり, <span class="math inline">\(Hom_{Set}(X, Y)\)</span> XからYへの写像全体</li>
</ul></li>
<li>例: <span class="math inline">\(cRing\)</span> : 1を持つ可換環
<ul>
<li><span class="math inline">\(Ob(cRing)\)</span> 1を持つ可換環, <span class="math inline">\(Hom_{cRing}(S,S)\)</span> <span class="math inline">\(1\)</span>を1に移す環準同型</li>
<li>環準同型の例 : 多項式環への代入写像</li>
</ul></li>
<li>集合と集まりは違うもの？ → 今日扱う圏は、小さい圏ということで</li>
<li><span class="math inline">\(F : C \to D\)</span> 共変関手、反変関手
<ul>
<li><span class="math inline">\(F1_X = 1_{FX}\)</span></li>
<li><span class="math inline">\(F(g \circ f) = F g \circ F f\)</span></li>
</ul></li>
<li>関手の例: 単位円
<ul>
<li><span class="math inline">\(A : cRing \to Set\)</span></li>
<li><span class="math inline">\(A : S \mapsto {(x, y) \in S^2 | x^2 + y^2 = 1}\)</span></li>
<li><span class="math inline">\(A : f \mapsto A f : (x, y) \mapsto (f(x), f(y))\)</span></li>
<li>関手を図形と思える例</li>
</ul></li>
<li>関手の例: <span class="math inline">\(Hom_C(X, -)\)</span>
<ul>
<li><span class="math inline">\(Y \mapsto Hom_C(X, Y)\)</span></li>
<li><span class="math inline">\(f \mapsto f_* = Hom_C(X, f) : \phi \mapsto f \circ \phi\)</span></li>
</ul></li>
<li>「ここからは時間を気にせず、思う存分質問して下さい」</li>
<li>自然変換の定義 : <span class="math inline">\(\alpha : F \to G\)</span>
<ul>
<li>F : <span class="math inline">\({\alpha_X}_{X \in Ob(C)}\)</span> <span class="math inline">\(\alpha_X : FX \to GX\)</span></li>
<li>可換になる</li>
<li><span class="math inline">\(\Rightarrow\)</span> <span class="math inline">\(\dot \to\)</span> とか使わない。 <span class="math inline">\(\to\)</span> で。</li>
</ul></li>
<li>共変関手の定義 <span class="math inline">\(D^C\)</span>
<ul>
<li><span class="math inline">\(Ob(D^C)\)</span> <span class="math inline">\(C\)</span>から<span class="math inline">\(D\)</span>への共変関手全体</li>
<li><span class="math inline">\(Hom_{D^C}\)</span> 自然変換</li>
</ul></li>
<li>例
<ul>
<li><span class="math inline">\(S \in Ob(cRing)\)</span> について、 <span class="math inline">\(Hom{cRing}(S,)\)</span> を <span class="math inline">\(Spec S\)</span> と書く (Spectral)</li>
<li><span class="math inline">\(R = Z[x, y] / (x^2 + y^2 - 1)\)</span></li>
<li><span class="math inline">\(\alpha : Spec R \to A\)</span></li>
<li><span class="math inline">\(\alpha_S : \phi \to (\phi(x), \phi(y))\)</span></li>
<li><span class="math inline">\(\alpha_S\)</span> は全部同型 <span class="math inline">\(Spec R \simeq A\)</span></li>
</ul></li>
<li>表現可能関手 : 関手が <span class="math inline">\(Hom(...)\)</span> と同型</li>
<li>米田の補題
<ul>
<li><span class="math inline">\(FX \simeq Hom_{Set^C}(Hom_C(X), F)\)</span></li>
</ul></li>
<li>例:
<ul>
<li><span class="math inline">\(cRing, Q, A\)</span>に適用</li>
<li><span class="math inline">\(AQ \simeq Hom_{Set^{cRing}}(SpecQ, A) \simeq Hom_{Set^{cRing}}(Spec Q, Spec R)\)</span></li>
<li>自然変換が有理点と思える。座標によらない (と感じた)</li>
<li>Q). <span class="math inline">\((\frac{3}{5}, \frac{4}{5})\)</span> は何に移る？ A). <span class="math inline">\(\phi:(x, y) \mapsto (\frac{3}{5}, \frac{4}{5})\)</span></li>
</ul></li>
<li>ここから後半</li>
<li>直積の定義 : <span class="math inline">\(k : W \to X, l : W \to Y\)</span> について <span class="math inline">\(h : W \to X \times Y\)</span> がユニークに存在</li>
<li>同型を除いて一意に存在</li>
<li>例: Setでの</li>
<li>余積の定義</li>
<li>ファイバー積(pull-back)の定義
<ul>
<li><span class="math inline">\(k : W \to X, l : W \to Y, f \circ k = g \circ l\)</span> のとき、<span class="math inline">\(h : W \to X \times_Z Y\)</span> が一意に存在</li>
</ul></li>
<li>例: ベクトル束 : 「エックス、ワイ、ファイ・バー・プロダクト！」
<ul>
<li><span class="math inline">\(Z\)</span> が１点だと、ファイバー積は直積になる</li>
</ul></li>
<li>ファイバー和(push-out)の定義</li>
<li>例: van Kampen の定義</li>
<li>極限の定義
<ul>
<li><span class="math inline">\(C, J\)</span>, <span class="math inline">\(F : J \to C\)</span> <span class="math inline">\(lim F\)</span></li>
<li><span class="math inline">\(k_j : W \to F_j\)</span>, <span class="math inline">\(u : i \to j\)</span>, <span class="math inline">\(Fu \circ k_i = k_j\)</span> のとき <span class="math inline">\(h : W \to Lim F\)</span> が唯一存在</li>
<li>射影的極限(Projective limit)、逆極限(inverse limit)、などと言う</li>
</ul></li>
<li>例: <span class="math inline">\(F : (1, 2) \to C\)</span> 直積</li>
<li>例: <span class="math inline">\(F : (\to \leftarrow) \to C\)</span> ファイバー積</li>
<li>例: <span class="math inline">\(F : N \to cRing, Fn = Z/p^nZ\)</span> の時 <span class="math inline">\(Lim F = Z_p\)</span></li>
<li>余極限の定義: 帰納的極限、順極限</li>
<li>覚え方: <span class="math inline">\(Hom\)</span>で書いた時の<span class="math inline">\(W\)</span>の位置。極限を取ると小さくなる(←)イメージ</li>
</ul>
<h2 id="圏とhaskellの型-kinebuchi-tomohiko-さん">圏とHaskellの型 / Kinebuchi Tomohiko さん</h2>
<ul>
<li>Haskellの型システムに出てくる圏論の概念</li>
<li>型 : 間違い検出、抽象化(1, 2, 3ではなく<code>Int</code>)、可読性、最適化</li>
<li>Hask : 対象は型、射は一変数関数</li>
<li>対象 : <code>Integer</code>, <code>String Maybe</code>, <code>String</code>, <code>[Integer]</code></li>
<li>数学の世界とHaskellの世界とdoble関数は似ている</li>
<li>関数は型？射？ 圏論を使う意味は？ 集合圏？</li>
<li>積 : tuple</li>
<li>余積 : Either</li>
<li>関手 : <code>Functor f</code>
<ul>
<li><code>f</code>が型関数、<code>map</code>が射関数</li>
<li><code>fmap id == id</code>、<code>fmap (f . g) == fmap f . fmap g</code></li>
</ul></li>
<li>例: <code>Maybe</code>、<code>[]</code></li>
<li><code>Just</code>はユニット？<code>Just</code>は射なの？ <code>fmap</code>はなんでも拡張できるの？ リストはベキ集合と思っていいの？ <code>Just</code> は無数に存在するの？</li>
<li>自然変換 : 型変数に依存しない多相関数</li>
<li>おしらせ「数学茶屋やります」「グッドマス」</li>
</ul>
</p>

</div>



<div>
  <h1>今日は『RCO Study Night 「D-Waveが切り開く、量子コンピュータを活用する未来」』の日です</h1>
<div class="post-info">
    Posted on <a href="./posts/2016-05-11-quantum.html">May 11, 2016</a>
    <!-- facebook button -->
    <div class="fb-like" data-href="http://hiratara.github.io/posts/2016-05-11-quantum.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
    <!-- Twitter button -->
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiratara.github.io/posts/2016-05-11-quantum.html" data-text="今日は『RCO Study Night 「D-Waveが切り開く、量子コンピュータを活用する未来」』の日です" data-via="hiratara">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

</div>
<p>
    <p>来てますのでメモを取ります。</p>
<h2 id="田中宗さん">田中宗さん</h2>
<ul>
<li>量子アニーリングが流行っている</li>
<li>D-Wave 世界初の商用量子マシン</li>
<li>組合せ最適化問題
<ul>
<li>量子アニーリングが得意とする</li>
<li>あらゆる産業界において非常に一般的な問題</li>
</ul></li>
<li>量子アニーリングは、物理学と情報処理の融合
<ul>
<li>1998年にかどわきさん、にしもりさんが理論を提供</li>
<li>2011年にD-Wave → 注目度が上がっている</li>
</ul></li>
<li>今日は歴史的な話から現在、将来的な展望まで</li>
<li>「活用する」事が大事
<ul>
<li>ハードはすでにある</li>
</ul></li>
<li>この場で、量子アニーリングをどう使えるか発見して欲しい</li>
</ul>
<h2 id="robert-h.-bo-ewaldさん">Robert H. (Bo) Ewaldさん</h2>
<ul>
<li>リクルートさんとは縁がある</li>
<li>ムーアの法則は終わると言われている
<ul>
<li>「ムーアの法則の死を予測する人が年々倍になる」</li>
</ul></li>
<li>Richard Feynman
<ul>
<li>1982 量子力学を使ってコンピュータを</li>
</ul></li>
<li>量子力学に抗うのではなく、活かす</li>
<li>今はビットの世界。分かれている</li>
<li>量子力学
<ul>
<li>ビットの重ねあわせ</li>
<li>量子のもつれ</li>
<li>バリアをエネルギーで超えるのではなく、トンネルを抜ける(低エネルギー)</li>
</ul></li>
<li>David Deutsch
<ul>
<li>量子チューリングマシン</li>
</ul></li>
<li>Peter Shor : 量子暗号</li>
<li>量子の世界
<ul>
<li>量子通信、量子鍵配信</li>
<li>Gate Model</li>
</ul></li>
<li>金属のアニーリング、と同じことをやる
<ul>
<li>焼きなまし</li>
</ul></li>
<li>物理学のphdの人たちのベンチャーから
<ul>
<li>コンピュータを作ろうとした</li>
<li>エンジニア採用も始めた</li>
</ul></li>
<li>今までのコンピュータと違う
<ul>
<li>ハミルトニアン形式で問題を記述する</li>
<li>確率論的に、エネルギーが一番低いところを、何万回も探す</li>
</ul></li>
<li>最初のものはLockheed Martin, Google, Los Alamos National Labの三社が購入
<ul>
<li>GoogleはMLに使おうとしている</li>
</ul></li>
<li>1000qubits → <span class="math inline">\(2^1000\)</span> のうちから候補をみつけてる</li>
<li>命令が1つ</li>
<li>消費電力がほとんどない。冷蔵に使う</li>
<li>コンパイラも何もない時代といえる。ソフトウェアをこれから作る</li>
</ul>
<h2 id="murray-thomさん">Murray Thomさん</h2>
<ul>
<li>3部屋ある。3m四方。チップが１つある
<ul>
<li>ラックで環境を作っている。</li>
<li>ネット経由で制御する端末</li>
<li>18層のシールドで隔てている</li>
<li>15mK以下まで冷やす</li>
<li>配線はすべて抵抗がないもの(熱が出てしまう)</li>
<li>1000個の量子ビットが乗ったチップ</li>
<li>回路の作り方は似ている。超電導性があるのが違い</li>
</ul></li>
<li>今までのコンピュータはトランジスタ</li>
<li>時計回りの電流と逆周りの電流→吸引と反発</li>
<li>8個のqubitが格子に入る</li>
<li>2値の最適化に使う</li>
<li>量子アニーリングは古典コンピュータ経由で使う</li>
<li>QMI : 量子コンピュータのための命令。</li>
<li>C, C++, MATLAB, Pythonなどのライブラリ</li>
<li>開発環境を作ろうとしている
<ul>
<li>大きな問題は分割して解く</li>
</ul></li>
<li>物理現象を使って問題を解く</li>
<li>最小化をする。qubitの相関をプログラムする
<ul>
<li>例えばリスクをあわせるときは両方同時に1にならないようにする</li>
</ul></li>
<li>4,512パラメータある。解を100なり10000なり受け取る</li>
<li>例: 色分け問題
<ul>
<li>qubitに色を割当てる。1つだけが1になるように重み付けする</li>
<li>2つのビットで1つの論理ビットとする</li>
<li>リージョン間の調停、コピー</li>
<li>問題が大きくなると、分割統治で。</li>
</ul></li>
<li>制約充足問題の表示を、C言語よりもコンパクトに書ける言語を設計</li>
<li>例: 巡回セールスマン問題
<ul>
<li>qubitに区間を当てはめる方法</li>
<li>次の改善で15都市</li>
<li>Parallel Update 100の都市</li>
</ul></li>
<li>ベンチマーク
<ul>
<li>11,000倍の違い</li>
<li>データサイズが大きくなっても、遅くならない</li>
</ul></li>
<li>車の識別
<ul>
<li>識別率が84%から94%</li>
<li>CPUサイクルを減らせた</li>
</ul></li>
<li>古典の方法より1億倍速いという結果も</li>
<li>D Waveは量子コンピュータをムーアの法則的にqubitを増やせた</li>
</ul>
<h2 id="質疑応答">質疑応答</h2>
<ul>
<li>Q. D-Waveは最適化問題に関する問題が得意？グラフ理論に関わるもの？他？</li>
<li>A. 例を上げたのは最適化問題。最小値を見つける設計だが、機械学習で使える</li>
<li>Q. 生物分野への適用は？</li>
<li>A. 生物学は情報の宝庫。パターン認識でがんの発見の研究</li>
<li>Q. 商用だそうですが、おいくら</li>
<li>A. $15,000,000。リースはある。</li>
<li>Q. 失敗した時にはどうなる？2色で分けるとか</li>
<li>A. NP困難問題の場合。4色で塗れることは証明されてる。ペナルティ(塗り分けられてない)が少ない答えを返す</li>
<li>Q. 金融機関は量子アニーリングに興味がある？</li>
<li>A. 関心はありそう。投資はしてもらっている。quontum for quontsというサイトが有る
<ul>
<li>ブタペストでそのような会議があった</li>
</ul></li>
<li>Q. 基礎研究にどのようなフィードバックを？ (かどわきさんご本人)</li>
<li>A. 物理力学的コンピュータをどう活用できるのか。理論的にシステムがスケールアップした時の挙動。ノイズとか。
<ul>
<li>論文を出している。直接貢献している。IRPAで新しいプロジェクトで科学的な観点を探している</li>
</ul></li>
<li>Q. 量子コンピュータがスマホのように使われることはあるのか</li>
<li>A. 絶対零度で動くので今は難しい。より高い温度で動いたりするようになれば。クラウドで使えるようになる</li>
<li>Q. プログラムのサイズと緩和時間は関係あるのか。どうすればコントロールできるのか</li>
<li>A. 量子状態が失われても、問題がない設計にしている</li>
<li>Q. 巡回セールスマン問題のアルゴリズムの</li>
<li>A. 色分けの場合は制約を入れた。巡回セールスマン問題では辺が2つ以上立たない制約。ある種のサイズまでは自動的にできる</li>
<li>Q. 素因数問題を最小値問題に置き換えた時の注目度</li>
<li>A. 章のアルゴリズムは有名なのでよく聞かれる。このマシンでの素因数分解はできる。3万2千までは。市場も限られるので</li>
<li>Q. プログラミング言語を作る気がある？</li>
<li>A. OSなどがあるわけではない。SDKを作ってくれているサードパーティーもある。コンパイル技術が出てくるのを望む。</li>
<li>A. コンピュータが出てからfortrunまで結構時間かかった。バーチャルメモリのようなものも作って入る。使い方をもっといろんな人に考えて欲しい</li>
<li>Q. 将来の予測するのは得意ではない？</li>
<li>A. 得意である</li>
<li>Q. 量子力学が使えなくも便利に使える？</li>
<li>A. はい。充足性問題の小さいものであれば。ハード的には古典的なソルバでは見つかれられない解を見つけそう</li>
<li>A. 専用の言語を使うと簡単にかける利点も</li>
<li>Q. グローバルな解を返せる？</li>
<li>A. 返せる。保証はない。高い正確性のものが上がる。量子コンピュータは続きを実行するのは苦手</li>
<li>Q. 巡回セールスマン問題で分割することで扱える都市が増える？</li>
<li>A. 8qubitsをまとめて分割。分割し過ぎると全体の解に貢献しなかったり。10000変数を1000できるのがいいのか2000がいいのかを判断するのは難しい</li>
<li>Q. 気楽にコンタクトを取れますか？</li>
<li>A. ぜひ聞いて下さい。今までのコンピュータを置き換えるものではなく、一緒に使う。細かい部分は古典コンピュータのほうが得意かもしれない</li>
</ul>
<h2 id="quantum-annealing-for-feature-selection-棚橋耕太郎さん">Quantum Annealing for Feature Selection / 棚橋耕太郎さん</h2>
<ul>
<li>特徴量選択 → 特定の特徴のみ選択
<ul>
<li>ビジネスに重要な特徴の抽出</li>
<li>コンピュータリソースの節約</li>
</ul></li>
<li>L1 regularized logistic regression
<ul>
<li>線形のみしか扱えなし</li>
<li>L0ノルムを使った方法を考えた</li>
</ul></li>
<li>L0ノルム→0ではないものの個数
<ul>
<li>L0ノルムの最小化は最適化問題になるので難しい</li>
<li>アンサンブルしてる。使う学習機を選ぶ</li>
<li>弱学習機は非線形なデータにも有効</li>
<li>学習誤差と学習機の数を最小化</li>
<li>D-Waveはないので、Quantum Monte Carlo</li>
</ul></li>
<li>QAFS → 精度がいい。特徴量の数が寄っている(自動で決まる)</li>
</ul>
</p>

</div>



<div>
  <h1>今日は 数学カフェ の日です</h1>
<div class="post-info">
    Posted on <a href="./posts/2015-09-27-math-cafe.html">September 27, 2015</a>
    <!-- facebook button -->
    <div class="fb-like" data-href="http://hiratara.github.io/posts/2015-09-27-math-cafe.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
    <!-- Twitter button -->
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiratara.github.io/posts/2015-09-27-math-cafe.html" data-text="今日は 数学カフェ の日です" data-via="hiratara">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

</div>
<p>
    <p><a href="https://www.facebook.com/mathcafejapan">数学カフェ</a> に来ていますので、メモを残しておきます。</p>
<ul>
<li>就職しても数学を学びたい、これからを就職する学生さん、数学好きな女性を増やしたい</li>
<li>今日はデータサイエンスの数学的な部分をきちんとやりたい</li>
</ul>
<h2 id="pseudo_finite-さんデータ分析における数理最適化---前半"><span class="citation">@pseudo_finite</span> さん「データ分析における数理最適化」 - 前半</h2>
<ul>
<li>学生時代は数理論理学やってた
<ul>
<li><span class="math inline">\(N + Z\)</span> もペアノの公理を満たす(前の数取れるので)</li>
</ul></li>
<li>「データサイエンティスト」ではなく「研究員」</li>
<li>データ分析
<ul>
<li>wikipedia : データを用いて分析</li>
<li>ビジネス : 意思決定・施策
<ul>
<li>現象を知る、施策を打つ</li>
<li>データの元となる現象を解明</li>
</ul></li>
</ul></li>
<li>データ分析の結果を誰が使うか
<ul>
<li>経営 : モニタリング・ざっくりした結果</li>
<li>現場 : アナリスト的</li>
<li>システム : プログラマ寄り・機械に落とし込む</li>
</ul></li>
<li>現象・施策のバランス == ビジネスインパクト
<ul>
<li>「日経平均と強い相関」コントロールできない、施策が打てない</li>
</ul></li>
<li>レコメンデーション
<ul>
<li>Conversion UP、(顧客|店舗)満足度UP</li>
<li>例: ホテル、本、ニュース、不動産、異性、広告、SNSの友達</li>
<li>商品を個人へ？ クラスタリング？</li>
</ul></li>
<li>レコメンデーション戦略
<ul>
<li>データ: 顧客・商品・属性、履歴、事前知識</li>
<li>シーン : タイミング、個数</li>
</ul></li>
<li>技術
<ul>
<li>協調フィルタリング、LR、SVM、隠れ状態系(NMF、pLSA、LDA)、数理最適化、RF-確率表</li>
<li>隠れ状態系はあまり現場で使われてない</li>
<li>スコアのテーブルを作るのが目標</li>
</ul></li>
<li>RF-確率表
<ul>
<li>タスク例 : 10週間のログから、顧客が閲覧する物件を予測 (TOP N レコメンド)</li>
</ul></li>
<li>分析の流れ
<ul>
<li>データクレンジング
<ul>
<li>BOT(はずれ値)、0/1 のカラムに日本語が入ってる(QUERY STRINGを生で突っ込んでるとか)</li>
<li>苦行。ロジック実装後にクレンジングすることもよくある</li>
</ul></li>
<li>可視化・基礎集計 (分析の方針を決定する)</li>
<li>分析用DBを作成</li>
<li>特徴量を洗い出したり</li>
</ul></li>
<li>可視化
<ul>
<li>人間が理解しやすい形に</li>
<li>1万ユーザくらいテキストファイルにして見る。通勤電車で1,000ユーザくらいずつ</li>
</ul></li>
<li>RF-確率表 : RecencyとFrequencyで確率を出す
<ul>
<li>実績値を確率とする？</li>
<li>単調性制約 : Recencyが小さい、Frequencyが大きいほど閲覧、という仮定</li>
<li>実績値は単調性制約を満たさない　(オーバーフィッティング)</li>
<li>確率表を推定する！</li>
</ul></li>
<li>確率表の推定
<ul>
<li>単調性制約を満たす</li>
<li>データ件数が多いセルの閲覧確率は信頼</li>
<li><span class="math inline">\(p_{ij}\)</span> 実績。 <span class="math inline">\(x_{ij}\)</span> 推定。</li>
<li>単調性制約を入れる</li>
<li>数理最適化問題として、ソルバーで解く</li>
</ul></li>
<li>RF-確率表のまとめ
<ul>
<li>実装が簡単</li>
<li>チューニングがいらない (ノンパラメトリック)</li>
<li>運用が現実的</li>
</ul></li>
<li>Q. 小数データというのは、個々人で再現してデータが少ないから？
<ul>
<li>A. この案件は大規模だから気にしなくていい。小規模な応用とか、商品の違いとかでデータが減る</li>
</ul></li>
<li>Q. Recencyとか冪分布になりそう。
<ul>
<li>A. 対数分布になりそうだけどやってない。ECサイトによって減衰が違うはず。関数形を仮定しなくていい</li>
</ul></li>
<li>Q. ロングテールが問題になりそうだけど？
<ul>
<li>A. 気にしてない。時計とかだとなりそう。不動産だと1 conversionで終わりとか。</li>
</ul></li>
<li>Q. binの切り方を工夫した方がいいのでは？
<ul>
<li>A. 課題はあるのか優先順位は低い。FとRをどうとるか。</li>
</ul></li>
<li>Q. 一定数溜まったbinのみを使うとかしない？
<ul>
<li>A. 議論はあった。1次元は簡単。2次元だと・・・。簡単さを求めているが、将来はやりたい</li>
</ul></li>
<li>制約付きレコメンデーション
<ul>
<li>TOP Nではなく、バランスを考慮したリコメンドが必要</li>
<li>1つの商品ではなくいろんな商品を売りたい</li>
<li>売れ行き悪い商品の援護</li>
<li>過剰レコメンドの抑制(店舗の課金を加味。いいホテルは勝手に売れる)</li>
<li>顧客のリピート率、顧客育成</li>
</ul></li>
<li>例えば、各商品の期待利得を1000円以上とか
<ul>
<li><span class="math inline">\(x_{ui}\)</span> user×itemの割り当てテーブル、<span class="math inline">\(e_{ui}\)</span> CV期待値</li>
<li>商品数<span class="math inline">\(\sum{x_{ui}}\)</span> や 期待コンバージョン数 <span class="math inline">\(\sum{x_{ui}e_{ui}}\)</span> に制約</li>
</ul></li>
<li>素直なモデルの問題
<ul>
<li>CV数が現実的ではなく解がない</li>
<li>変数のオーダーが10,000オーダーでソルバが厳しい
<ul>
<li>100顧客×100商品・・・</li>
</ul></li>
<li>レコメンド可能商品を絞ると1,000顧客にはできるけど・・・</li>
<li><span class="math inline">\(p_i\)</span> を追加。CV目標の違反量。これを重みづけして混ぜて最適化
<ul>
<li>連続変数が入るので問題は難しくなっている</li>
</ul></li>
</ul></li>
<li>列生成法とラグランジュ緩和法を組み合わせる
<ul>
<li>10,000顧客まで解けるように</li>
<li>Oracle, Primal*, QUERY を反復する</li>
<li><span class="math inline">\(P\)</span> パターン集合、 <span class="math inline">\(g_{uip}\)</span> CV期待値</li>
<li>ラグランジュ乗数でCV目標制約を制御</li>
<li>ラグランジュ緩和問題が下界を与える</li>
<li>item×userから、userごとの制約に書き換えられる</li>
<li>反復回数は10回、40～50回</li>
</ul></li>
</ul>
<h2 id="cm数理女子">CM「数理女子」</h2>
<p><a href="http://www.math.keio.ac.jp/~suuri-joshi/">数理女子</a>。女性が数学を勉強するための障壁をなくしたい。数学を使っている女性で記事などを執筆してくれる方募集。</p>
<p>「都内数学科学習連合にも女性居ますよ」</p>
<h2 id="pseudo_finite-さんデータ分析における数理最適化---後半"><span class="citation">@pseudo_finite</span> さん「データ分析における数理最適化」 - 後半</h2>
<ul>
<li>雑談 : 研究者が社会に出るときに知っておくとすっきりすること
<ul>
<li>研究者
<ul>
<li>正しいことを好む</li>
<li>すべての事実を話す</li>
<li>面白い研究テーマを好む</li>
<li>挑戦的な問題を好む</li>
<li>論文を書く</li>
</ul></li>
<li>実務家
<ul>
<li>ベストな選択を選ぶ</li>
<li>必要な事実を話す</li>
<li>顧客が好むサービスを好む</li>
<li>リスクのある仕事を嫌う</li>
<li>売上を出す</li>
</ul></li>
</ul></li>
<li>文書要約
<ul>
<li>google検索の結果(スニペット文)、国語試験の要約、書き込みの要約、ニュースサイトのトピック、論文サーベイ、あらすじ、アブスト、新幹線車内電光掲示板</li>
<li>「夢」よりも「シビア」</li>
<li>ジャンル、カテゴリ、著者で手法が分かれる
<ul>
<li>記者が書いたものは、だいたいヘッドラインが要約として抽出される</li>
</ul></li>
<li>ルール: 字数制限 or 要約率</li>
<li>要約はなぜ必要？ : 時間がない。要約にはスキルが必要</li>
</ul></li>
<li>Twitterのキーワード検索による1000ツイートを要約
<ul>
<li>動機: ニュースをざっくり知る、キーワードの観測</li>
<li>多数派の意見を冗長性なく</li>
</ul></li>
<li>データクレンジング
<ul>
<li>日本語は形態素解析が必要なので難しい</li>
<li>日本語の活用</li>
<li>RTなど</li>
</ul></li>
<li>単語文書行列 : 文書×語彙の頻度</li>
<li>TF(Term Frequency) * IDF(Inverse Document Frequency)
<ul>
<li>IDFは単語の出現数の逆数をlogをとったもの(多くの文書に現れる単語は特徴的でない)</li>
</ul></li>
<li>要約にドキュメントを含めるか<span class="math inline">\(x_d\)</span> 要約に語が選択されているか<span class="math inline">\(y_w\)</span>
<ul>
<li>面積を最大化する</li>
<li>tfidf値を利用する</li>
</ul></li>
<li>文字数は制約式。 <span class="math inline">\(y_w\)</span> の選定も制約式で行う</li>
<li>実際に分析した例:
<ul>
<li>素数 : 素数を数えて落ち着くんだ系</li>
<li>フォルクスワーゲン、鬼怒川 : ニュースのヘッドラインなど</li>
</ul></li>
<li>レビューの文書要約とかは商品買うのにいいかも</li>
<li>良い数理モデリング
<ul>
<li>データの特徴を捉えている</li>
<li>定式化とアルゴリズムがタスクにハマっている</li>
<li>「センスが必要」。基本が大事。</li>
</ul></li>
<li>Q. 文書要約で数理最適化を使うのはよくある手法？
<ul>
<li>A. はい。研究されている方も</li>
</ul></li>
<li>Q. Oracle の変形で <span class="math inline">\(p_i\)</span> が <span class="math inline">\(0\)</span> になる理由は？
<ul>
<li>A. 制約が入ってないから</li>
</ul></li>
<li>Q. 反復の計算量のスケールは？
<ul>
<li>A. マシンスペックはノートPC(メモリ4GB程度)</li>
<li>A. 反復6回で1日以上かかってる。序盤のイテレーションは数時間</li>
</ul></li>
<li>Q. Oracleの問題を速く解くように設定する？
<ul>
<li>A. Oracleは問題規模が小さくなってるから余裕。Primal*が規模が大きい</li>
</ul></li>
<li>Q. 数理モデルのセンスの身に着け方は？
<ul>
<li>A. データをよく見る。実装。入力データをぶらす。</li>
<li>A. 数理計画の立場から見ると、正規分布で済ます、のが違和感がある</li>
<li>A. 常にモデリングを心がける。土地勘を身に着けるためにまずいろいろ知る</li>
</ul></li>
<li>Q. モデルがあっているかの検証はどうしている？
<ul>
<li>A. 正解データを用意している。SVMやロジスティック回帰と比較はしてる。PR、F値で見る。min avg precision。本当に単調現象なのかとかを統計的に検定したいがやってない</li>
<li>A. 元々統計畑ではないので。</li>
</ul></li>
</ul>
<p>その後、ソーシャルに書けない大人の話をもろもろ。</p>
<h2 id="simizut22-さん代数トポロジー入門"><span class="citation">@simizut22</span> さん「代数トポロジー入門」</h2>
<ul>
<li><a href="https://twitter.com/search?q=世界に代数トポロジーの光を">世界に代数トポロジーの光を</a></li>
<li>学部レベルの内容</li>
<li>曲面のMorse理論。cell複体のhomology</li>
<li>やらないとこ「多様体、一般ホモロジー、離散Morse,、単体的、層」</li>
<li>臨界点、退化と非退化(2次導関数が0かどうか)
<ul>
<li>2変数関数では∇=0</li>
<li>退化については Hesse行列が生息か否か</li>
<li><span class="math inline">\(xy\)</span> と <span class="math inline">\(x^2 - y^2\)</span> は座標変換で移りあう</li>
</ul></li>
<li>Morseの捕題
<ul>
<li>非退化臨界点の周りでは<span class="math inline">\(x^2+y^2\)</span> <span class="math inline">\(x^2-y^2\)</span> <span class="math inline">\(-x^2-y^2\)</span>のいずれかでかける</li>
</ul></li>
<li>非退化臨界点の指数 → 0, 1, 2 (Morseの捕題の局所座標表示によるマイナス係数の個数)</li>
<li>今日は2次元閉多様体の話</li>
<li>局面上の関数の臨界点・退化性は局所座標で (局所座標の取り方によらない)</li>
<li>Morse関数 : <span class="math inline">\(f : M \to R\)</span> がMorse関数 def 全ての臨界点が非退化
<ul>
<li>閉曲面上の Morse関数の臨界点は高々有限</li>
<li>Mがコンパクトなのでfは最大・最小値をとる</li>
</ul></li>
<li><span class="math inline">\(S^2\)</span>上の高さ関数 <span class="math inline">\(h(x, y, z) = z\)</span> Morse関数</li>
<li>閉曲面M上に臨界点が2つだけのMorse関数が存在すれば、Mは球面と微分同相
<ul>
<li>7次元以上だと微分同相とは限らない</li>
</ul></li>
<li>曲面のハンドル分解
<ul>
<li>閉曲面上のMorse関数 <span class="math inline">\(M_t\)</span> 下の部分、 <span class="math inline">\(L_t\)</span> 等高線を定義</li>
<li>Morse関数は閉曲面上の高さ関数と見れる</li>
</ul></li>
<li>gradient like vector field</li>
<li><span class="math inline">\(c_0 \in R\)</span> が fの臨界値</li>
<li><span class="math inline">\(M_b ~= M_c\)</span> 微分同相
<ul>
<li>臨界値の前後の様子だけみればいい <span class="math inline">\(M_{[c - \epsilon, c + \epsilon]}\)</span></li>
<li>指数によって <span class="math inline">\(D^2\)</span> が増えたり減ったりする</li>
<li>指数1の時に臨界点前後で向きが変わる</li>
<li>[0-2]handle</li>
<li>臨界点を通るたびにhandleが付け代わる</li>
<li>丙局面は有限個のhandleの和で表せる</li>
</ul></li>
<li>セル複体
<ul>
<li><span class="math inline">\(e^i\)</span> オープンとクローズなディスク(バーの有無)</li>
<li>0-dim 有限点</li>
<li><span class="math inline">\(h_i\)</span> 接着写像 <span class="math inline">\(e^i\)</span> の境界からYへの写像。をつかって帰納的に</li>
</ul></li>
<li>ハンドル体とセル複体は似てる</li>
<li>homotopy同値とは
<ul>
<li><span class="math inline">\(S^1 ~ R^2\)</span> は 一点とhomotopy同値ではない</li>
</ul></li>
<li>ハンドルとセルは1-1対応する</li>
<li>homotopy不変量についてはハンドル分解を用いて計算をしても問題ない</li>
<li>Q. 次回までに何をやればいい？
<ul>
<li>A. 多面体を三角形分解とかセル分解したり？</li>
</ul></li>
<li>Q. Morse関数の臨界点は有限ってのは病的な例は大丈夫？
<ul>
<li>A. compactなら大丈夫では？</li>
</ul></li>
<li>Q. 退化と非退化は曲率？
<ul>
<li>A. metric入ってないので</li>
</ul></li>
</ul>
</p>

</div>



<div>
  <h1>今日は「Event for Diverse Game Engineers」の日です</h1>
<div class="post-info">
    Posted on <a href="./posts/2015-09-20-event-for-diverse-game-engineers.html">September 20, 2015</a>
    <!-- facebook button -->
    <div class="fb-like" data-href="http://hiratara.github.io/posts/2015-09-20-event-for-diverse-game-engineers.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
    <!-- Twitter button -->
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiratara.github.io/posts/2015-09-20-event-for-diverse-game-engineers.html" data-text="今日は「Event for Diverse Game Engineers」の日です" data-via="hiratara">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

</div>
<p>
    <p><a href="http://ptix.co/1RSusta">Event for Diverse Game Engineers</a> に参加しています。 有料イベントですが全トークソーシャルO.K.のようなので、自分用のメモを残しておきます。 ハッシュタグは <a href="https://twitter.com/search?q=%23TokyoEDGE2015">#TokyoEDGE2015</a> です。</p>
<h2 id="mio_11-さん-思い描いてるものを形にするための事前準備"><span class="citation">@4_mio_11</span> さん 「思い描いてるものを形にするための事前準備」</h2>
<ul>
<li>注意事項など</li>
<li>スクエニ本社に行きたい、大きい勉強会、そこで話したい</li>
<li>東京旅行のついでに <span class="citation">@tsuchidasama</span> さんにあって勉強会開こうと思った</li>
<li>80人くらいかと思ったら170人超え</li>
<li>「行動あるのみ」</li>
<li><span class="citation">@tsuchidasama</span> さんにFBで申請した</li>
<li>自分の環境を変化させてみよう</li>
<li>本物のゲーム開発者に触れるといいでしょう</li>
</ul>
<h2 id="dada246-さん-shared_ptrとゲームプログラミングでのメモリ管理"><span class="citation">@DADA246</span> さん 「shared_ptrとゲームプログラミングでのメモリ管理」</h2>
<ul>
<li>眠くなる話で眠らせていく予定</li>
<li>OSは動いていること前提。C++ネイティブ。アクションゲームなどリアルタイム性。中規模～(50人以上)</li>
<li>ゲームプログラム
<ul>
<li>FPSが安定</li>
<li>(メモリの観点で)スワップアウトが発生しない</li>
<li>実行時のメモリが物理メモリサイズに収まる</li>
</ul></li>
<li>メモリ固定管理: ゲーム中はOSからメモリをもらわない
<ul>
<li>動的管理: 必要になったらメモリを返却する</li>
<li>今回は後者</li>
</ul></li>
<li>近年データ量が増えている。データドリブンである必要</li>
<li>メモリを動的管理にすることで制限が減る</li>
<li>多彩なデータを扱えると、デザイナやアーティストが思いついたアイデアを試行錯誤できる</li>
<li>「一時的にメモリを使用するデータ」のtry and errorが可能に！</li>
<li>ゲームシーケンス: シーンによってメモリの利用方法が変わる</li>
<li>動的管理の問題
<ul>
<li>リーク、断片化、処理速度</li>
<li>これらを嫌って固定管理するプログラマも多い</li>
</ul></li>
<li>std::free、deleteを忘れるとリークする
<ul>
<li>メモリの開放を他のプログラマに委ねる場合に起きる <code>Register</code> と <code>UnRegister</code> など</li>
</ul></li>
<li>RAII (Resource Acquisition Is Initialization)
<ul>
<li>オブジェクトとリソースの生存時間をそろえる</li>
<li>実装例: shared_ptr</li>
</ul></li>
<li><code>new</code> と <code>delete</code> を使わない
<ul>
<li>モジュールごとに shared_ptr で分離される</li>
<li>生ポインタは動作速度が必要なときのみ</li>
</ul></li>
<li>コンストラクタで初期化できるようにする
<ul>
<li>C++ の閉じかっこの強さを利用する</li>
</ul></li>
<li>std::mallocを使う必要がある場合 =&gt; バイナリデータ読み込み
<ul>
<li>std::freeの書き忘れが起きる</li>
<li>リーク検出ツールで検出 → 簡単に作れるよ！</li>
</ul></li>
<li>今時のOSはアロケータを差し替えられる
<ul>
<li>例: win の <code>_cdecl operator new</code></li>
<li>ここでデバグ情報を保存する</li>
</ul></li>
<li>リークしているアドレスは生存期間が長い
<ul>
<li>アドレスに日付を付ける</li>
<li>常駐データなど、解放しないものもある</li>
<li>コールスタックも保存。1回のみのモノは常駐データ</li>
<li>winの場合は<code>RtlCaptureStackBackTrace</code></li>
</ul></li>
<li>「同一のコールスタックから生存時間の長いメモリを複数回確保」をメモリリークとして検出
<ul>
<li>ログの分析はC#など使っている(C++ではちょっと)</li>
<li>jenkinsにまとめるといいでしょう</li>
</ul></li>
<li>断片化: 連続したメモリが確保できない状態
<ul>
<li>メモリは空いてるのに確保に失敗</li>
<li>MMU(memory management unit)の有無で変わる(ふつうのPCならあるけど、ないマシンも多い)</li>
<li>ハードウェア構成によって断片化のしやすさ代わる
<ul>
<li>ハードによって戦略が変わる</li>
</ul></li>
</ul></li>
<li>MMU非搭載
<ul>
<li>物理アドレス空間の断片化に要注意</li>
<li>物理メモリ16MBなどの組込。固定管理の方が適してる</li>
</ul></li>
<li>MMU搭載 (幸せなプログラミングができる。運がいい)
<ul>
<li>仮想メモリ空間の大きさを当てにして、何もしない</li>
<li>ゲームは、物理メモリ量に収まるサイズのアプリになるはずなので</li>
<li>64bit Win8.1 : 128TB。ページ単位のブロックアロケータ。断片化気にしない
<ul>
<li>トラブったら設計がまずいはず</li>
<li>Blackhat 2010 Understanding the Low Fragmentaton Heap</li>
</ul></li>
</ul></li>
<li>MMU搭載で仮想アドレスと実メモリに差が少ない場合
<ul>
<li>例: 32bit Windows XP で 2GByteのゲーム</li>
<li>断片化にかなり注意が必要</li>
<li>生存時間の長いメモリを減らす</li>
<li>生存時間の違うメモリのアドレスを、離す</li>
</ul></li>
<li>生存時間の長いメモリを減らすには
<ul>
<li>相互参照を減らして、速やかに開放できるようにする</li>
<li>長時間駆動に耐えやすい</li>
<li>依存関係が増えやすいときは <code>weak_ptr</code></li>
<li>シーケンス切り替え時にモジュールを捨てる。状態データのみ抽出して引き継ぐ</li>
<li>シーケンスデータ移行モジュールを作ることも</li>
</ul></li>
<li>シングルトン、グローバルインスタンスは極力使わない
<ul>
<li>グローバルインスタンスを先頭にとる。断片化が起きない</li>
</ul></li>
<li>生存時間の違うアドレスを分ける
<ul>
<li>アロケータを複数 or Double Ended Stack allocator (上からか下からか選べるアロケータ)</li>
</ul></li>
<li>VRAM : 断片化する
<ul>
<li>メインメモリよりは気楽にとらえることも</li>
<li>アドレスをプログラム側に渡してない
<ul>
<li>いざとなったらメモリコンパクションを実装</li>
<li>メインメモリでは厳しいよね</li>
</ul></li>
</ul></li>
<li>動的確保に見合った処理速度にするしかない
<ul>
<li>教科書通りの高速化は実施 (User-landで実施するアロケータ作るとか)</li>
<li>User-landとKernel-landの切り替えは時間がかかる</li>
</ul></li>
<li>生産性とのバランスの問題
<ul>
<li>速度か開発の柔軟性</li>
<li>処理の高速性が求められるところのみ頑張ればO.K.では</li>
</ul></li>
<li>リークツールは3日か4日あれば組める程度でしょう</li>
<li>メモリが不足したらどうする？
<ul>
<li>不足しないようにゲームを作る</li>
<li>自動テスト・エージングでメモリ使用量を必ず把握する</li>
<li>断片化・リークを直してもダメなら、データ側を修正しなければならない</li>
<li>開発用ROMではたくさんメモリ使えるからデザイナさんが頑張っちゃったりするけど</li>
</ul></li>
<li>動的管理によるいいこと
<ul>
<li>多彩なデータを動作させることが可能に</li>
<li>デザイナ、アーティストのクリエイティブてぃを引き出す！ 面白いゲームを！</li>
</ul></li>
<li>Q. ユニークポインタを使わずに shared_ptr がメイン？
<ul>
<li>A. new, delete は使わずにスマートポインタを使おう</li>
</ul></li>
</ul>
<h2 id="aizen76-さん-ue4とunreal-cでのプログラミング環境について"><span class="citation">@aizen76</span> さん 「UE4とUnreal C++でのプログラミング環境について」</h2>
<ul>
<li>Unreal Engine 4
<ul>
<li>2015年 無料化が発表された</li>
<li>3Dでも2Dでも</li>
<li>ドラクエ11のPS4版</li>
<li>デスノートのリュークのCGも</li>
<li>アニメ会社とかでも注目度が高い</li>
<li>ブループリント(ビジュアルなスクリプトシステム)を使うのがオススメ</li>
<li>「ボクが作るならはC++のコード一行もかきません」</li>
</ul></li>
<li>C++を使う理由
<ul>
<li>パフォーマンスの追及(速さは十分だけど、数十～数百倍の差が出ることも)</li>
<li>エンジン・エディタを拡張したい (ほとんどの部分が公開されていて拡張可能)
<ul>
<li>pull-reqしたりできるよ</li>
</ul></li>
<li>外部ライブラリやSDKの使用 (OpenCVとか)</li>
<li>独自デバイスの利用 (KINECTとか)</li>
<li>C++の勉強！</li>
</ul></li>
<li>“Unreal C++ is Awesome!” 自画自賛
<ul>
<li>初心者向けC++。独自拡張。Unreal Editorとの親和性</li>
<li>C#やJSの特徴も</li>
</ul></li>
<li>Unreal BuildTool → Mono C# → VisualStudio OR Xcode</li>
<li>UnrealBuild Tool
<ul>
<li>C++のメタ情報</li>
</ul></li>
<li>Mono C#
<ul>
<li>クロスプラットフォームを意識したモジュールの管理・リンク</li>
</ul></li>
<li>Windows, Macで動く。Linuxでも実は動く</li>
<li>比較的モダンC++
<ul>
<li>Range based forに対応</li>
<li>ムーブセマンティクス (右辺値参照)</li>
<li>コンテナのアルゴリズムにラムダ式</li>
<li>auto, enum</li>
<li>ただし、対応してないコンパイラがある機能には慎重 (マルチプラットフォームなので)</li>
<li>テンプレートとか難解な部分はなるべく使わない</li>
</ul></li>
<li>コーディングルールが決まっている
<ul>
<li>C#の標準にかなり近い</li>
<li>C++の標準よりこちらを</li>
<li>「中かっこ論争は醜い」</li>
<li>誰が書いたかわからないくらい普通のルール</li>
</ul></li>
<li>STLは使わない。ゲーム用に特化したいいライブラリがあるので
<ul>
<li>boostとか無理やり使うと苦しくなる</li>
</ul></li>
<li>C++標準より圧倒的にコンテナ多い。50種類くらいある
<ul>
<li>TArray, TSet, TMap (std::unordered_* とか書かなくていい)</li>
<li>FString (std::stringベースだがほぼ別物), FText (言語切り替えに対応), FName (静的文字列。速い。アセットの名前などに)
<ul>
<li>ネットワーク周りのエンディアンとかにも対応</li>
</ul></li>
<li>C#ライクなデリゲート。ダイナミックデリゲート(特殊。シリアライズ可能)</li>
</ul></li>
<li>Unreal Editorが自動でコード生成
<ul>
<li>.cppと.hも個別に作らない</li>
<li>wizardみたいな感じで</li>
</ul></li>
<li>GCあり。UnrealObject (UObject) を継承していれば
<ul>
<li>GC最適化可能 (呼び出し感覚、強制GC、並列化、オブジェクトプールなど)</li>
<li>メモリの可視化</li>
</ul></li>
<li>UObjectじゃないものはスマートポインタ
<ul>
<li>TSharedPtr, TSharedRef, TWeakPtr</li>
<li>ゲームで使用する前提の設計</li>
<li>スレッドセーフじゃなく、標準スマートポインタより早い</li>
<li>TThreadSafeSharedPtr (ロックフリーアルゴリズム)</li>
<li>コピー時にメモリ割り当てしない</li>
<li>例外使わない</li>
</ul></li>
<li>C++にメタ情報はない
<ul>
<li>RTTI(実行時型情報)はある</li>
<li>Unreal Header Tool にて実現
<ul>
<li>UCLASS, UPROPERTY, UFUNCTION, USTRICT のようなアノテーション</li>
<li>reflectionだけでなく、様々な情報を追加可能</li>
<li>ブループリントとの連携に利用 (BlueprintReadWrite, BlueprintCallable)</li>
</ul></li>
</ul></li>
<li>ホットリロード
<ul>
<li>ゲーム実行中にC++コードを書き換えることができる</li>
<li>部分的にDLLをリロードできる (Mono C# がやってる)</li>
</ul></li>
<li>ホットリロードのデモ
<ul>
<li>C++コード(Actor)を追加</li>
<li>ヘッダを書き換えるとビルドが遅くなるので、try and error はヘッダを書き換えない方が</li>
<li>ゲーム実行中にマネキンを設置、C++コードを書く、ビルドすると回転を始める</li>
<li>さらにC++を書いてビルド → 失敗。エラー箇所にジャンプできる</li>
<li>さらにC++を書いてビルド → 失敗。ライブデバグ</li>
<li>「何度も成功してたのですが、やはり生は怖いですね」</li>
<li>プロパティはblue print 上から見えるようになる</li>
<li>「ログのLがlに！」 → コンソールにライフの表示を成功</li>
<li>コンソールへクラス名を吐く (リフレクションの例)</li>
<li>再起動。Visual Studioとの接続を切断</li>
<li>Unreal Engineでソースコードをエディットする (VCのインストールはいるけど、立ち上げなくていい)
<ul>
<li>VCは重いから。ただしエディタはしょぼい</li>
</ul></li>
<li>blue printからVCで該当行にジャンプとか</li>
</ul></li>
<li>Unreal C++ は素晴らしい。ただし、ブループリントで十分にゲームを作れる</li>
<li>Unreal Fest 2015 横浜というイベントがあるよ (1000人まで)</li>
<li>UE4 GameJamというイベントを関西でやるよ (20人まで)</li>
<li>Q. コーディング規約をサポートするツールはあるの？
<ul>
<li>A. ツールはなさそう。レビューで直しているようだ。ルールで書けないところもあるので難しい</li>
</ul></li>
<li>Q. Unreal C++でラムダ式は使える？
<ul>
<li>A. はい。VC++で使える機能なら</li>
</ul></li>
<li>Q. コンパイル速度はマシン性能による？
<ul>
<li>A. VCのコンパイラ速度に依存。モジュール単位でビルドしてるので普通より速いはず</li>
<li>Q. 今のはでもマシンの性能のせい？</li>
<li>A. はい。普通は5秒。ハイスペックマシンを使って</li>
</ul></li>
<li>Q. コンパイル速度を速くするツールとかノウハウを
<ul>
<li>A. すでにやられている。我々ができることはほとんどない</li>
<li>Q. 分散ビルドは？</li>
<li>A. 公式にサポートされてるので、使っても</li>
</ul></li>
<li>Q. C++14への対応は？
<ul>
<li>A. 少しずつ増えている。VC++やXCodeが対応されていれば</li>
</ul></li>
<li>Q. コンパイラの選択はできる？ clangとか
<ul>
<li>A. 去年の12月に出てきている。問題はまだある。そのうちはいるはず</li>
</ul></li>
</ul>
<h2 id="shw95349-さん-元コンシューマ系pgがアケゲ開発やってみたアケゲ開発でのc"><span class="citation">@shw95349</span> さん 「元コンシューマ系PGがアケゲ開発やってみた　～アケゲ開発でのC++～」</h2>
<ul>
<li>男の煩悩担当みたいなコンシュマーゲーム開発
<ul>
<li>4vs4オンライン協力対戦アーケードゲーム</li>
</ul></li>
<li>PS3, XBOX360, Wii, Vita, 3DSの時代のコンシュマー</li>
<li>プラットフォーム複数なのでコンパイラも複数
<ul>
<li>C++ベースでビルドが通るように。方言は禁止</li>
<li>STL, Boostの使用制限 → レガシーなコーディング</li>
</ul></li>
<li>最近のアーケードゲーム開発
<ul>
<li>PCゲームの開発のようなもの</li>
<li>筐体の中にPCが入ってる、ようなもの</li>
<li>OS: Win, CPU: Intel Core i3, GPU: NVIDIA GeForce</li>
<li>コンパイラを選べる。外部ライブラリやミドルウェアの使用。ハードウェアの自由な設計</li>
</ul></li>
<li>アーケード、コンシューマーとモバイルの比較
<ul>
<li>言語は変わらない</li>
<li>アーケードの場合、店舗(オペレータ)もお客様</li>
<li>アーケードの場合、デバイスが自由度</li>
<li>アーケードは風営法など、地域の法律への考慮が必要</li>
</ul></li>
<li>作ったゲーム
<ul>
<li>30fps, 1280x1080をアップスケーリングして1080p</li>
<li>グラフィックはオーソドックス</li>
<li>エフェクトの社内制ツールやADX2(サウンド)</li>
<li>ネットワーク周りは大変。ゲームデータ管理からパッチ、Wifi周りまで</li>
<li>C++がメイン。ツールはC#。DBサーバはJava</li>
<li>STLを多用。VS2012のためC++11機能が一部使える</li>
<li>足りない部分は Boost</li>
<li>典型的なOOP、MVC。(</li>
<li>クラス図は複雑: 出力しようと思ったら1日かかっても出力できなかった)</li>
</ul></li>
<li>C++11の嬉しい機能
<ul>
<li>ラムダ式 : STLと相性が多い。コールバック定義場所が近くに。boost::bindの緩和。式がでかいと見にくい</li>
<li>型推論 auto と decltype
<ul>
<li>無駄なtypedefの駆逐。その場でしか書かないやつとか</li>
<li><code>auto&amp;&amp;</code> Reference Collapsing の挙動を知らないとハマる</li>
</ul></li>
<li>range-based for</li>
<li>std::tuple 構造体定義を少なく
<ul>
<li>ただしtupleの構造を変えるとstd::get, std::tieの調整が大変</li>
</ul></li>
<li>std::array : 全要素比較が楽だったり</li>
<li>Scoped Enumeration : 名前衝突の危険性を低減。ラッパーなどあった方が</li>
<li>std::atomic : 通信同期に使ったり</li>
<li>std::future, std::promise : 非同期処理に (問題になったけど)</li>
<li>static_assert : バグの芽を摘む</li>
<li>final, override : コンパイル時にエラー見つける</li>
<li>Boost.Property_tree : XML便利</li>
<li>Boost.Preprocessor : 便利マクロ群</li>
</ul></li>
<li>C++は進化してもバグは尽きない
<ul>
<li>オブジェクト・エフェクトを大量に出すとクラッシュ → プールしてメモリを節約</li>
<li>オブジェクト大量にあるときのコンテナへのアクセスコスト
<ul>
<li>std::list を std::vectorへ</li>
<li>固定長のモノは reserve や std::array へ切り替え</li>
<li>push_*** を emplace_***</li>
<li>アルゴリズムを見直し</li>
</ul></li>
<li>std::thread, std::future, std::promiseのリーク
<ul>
<li>VS2012のバグだったのでBoostへ</li>
</ul></li>
</ul></li>
<li>CI(Jenkins)、Coverity などで問題を炙り出す → 割と平和にリリース</li>
<li>アーケードゲームで違ったこと
<ul>
<li>テストモード</li>
<li>筐体が場所を取る。キーチップなど</li>
<li>作成基準が会社独自</li>
<li>KPIの分析はモバゲーに近い</li>
<li>データのバックアップ・復元処理</li>
<li>アーケードは初回起動に時間かかっても問題ない</li>
<li>ソフトウェア面ではコンシューマ開発と変わらない</li>
<li>コンテンツそのもの以外に現場体験重視</li>
</ul></li>
<li>ゲーセン来てね！</li>
</ul>
<h2 id="hotwatermorning-さん-juceで作るオーディオアプリケーション"><span class="citation">@hotwatermorning</span> さん 「JUCEで作るオーディオアプリケーション」</h2>
<ul>
<li>bitbucket にサンプルコード上がってるよ</li>
<li>JUCEライブラリ
<ul>
<li>Traktionの内部用で開発</li>
<li>商用ライセンスあり（12万円）</li>
</ul></li>
<li>DAW : オーディオ政策に使う統合制作環境
<ul>
<li>オーディオプラグイン。音をゆがませたりするやつ</li>
<li>デモ: 音楽を流しながら続行ｗ</li>
<li>色んなオーディオアプリケーション開発企業で利用されている</li>
</ul></li>
<li>モダンなC++で書かれている</li>
<li>オーディオ、GUI関連、Network、暗号化、スレッド</li>
<li>exampleのJuceDemoを見るといいよ</li>
<li>オーディオプラグインの規格
<ul>
<li>VST, Audio Unit, AAX, RTAS</li>
</ul></li>
<li>ゲームエンジンではない</li>
<li>信号処理に特化してない。最低限</li>
<li>特定のモジュールだけを使うのは難しい。がっつり使う</li>
<li>JUCEはIntrojucerを利用して開発
<ul>
<li>CMake的なもの。マルチプラットフォーム</li>
<li>簡易なコード生成機能も</li>
<li>日本語には対応してない</li>
</ul></li>
<li>テンプレはあるので書きたいとこから書ける</li>
</ul>
<h2 id="tsuchidasama-さん-プログラマの生存戦略-生き残る為に出世しろ"><span class="citation">@tsuchidasama</span> さん 「プログラマの生存戦略 ～生き残る為に出世しろ～」</h2>
<ul>
<li>21歳で独立してバブル崩壊して死んだり</li>
<li>講演してる: CEDEC, GDC, 学会・大学</li>
<li>専門学校では「いいから量をやれ」遊びまくってるから</li>
<li>大学では「専門武器を持て」企業が見たい</li>
<li>ゲーム業界の人には「生き残るために出世しろ」</li>
<li>出世とは？
<ul>
<li>上司に気に入られる → 上司が変わる。消える。上司が部下に。無駄</li>
<li>社内の役職 → 部署がなくなる。会社が合併。会社がなくなる。無駄</li>
</ul></li>
<li>生き残るための出世とは？
<ul>
<li>世に出る</li>
<li>世間に力を認知してもらう</li>
</ul></li>
<li>心得1. 自分の担当個所を商品の売りに
<ul>
<li>どんな仕事でもやる</li>
<li>今までの経験を生かす</li>
</ul></li>
<li>心得2. OOと言えばXXさん
<ul>
<li>ニッチを狙う</li>
<li>新分野を作る</li>
</ul></li>
<li>心得3. 対外活動に出る
<ul>
<li>自分の広報担当者は自分</li>
<li>場所がなければ自分で作る</li>
</ul></li>
<li>世に出ると
<ul>
<li>会社がつぶれても関係ない</li>
<li>主従の逆転 「俺様が会社に居てやってる」</li>
<li>精神衛生にいい : 給料が下がってもどうせすぐやめれるし、みたいな</li>
<li>能力のインフレを目の当たりにする → 会社の中に居てはわからない
<ul>
<li>社内政治とかどうでもよくなる</li>
</ul></li>
</ul></li>
<li>オチ「勤続20年にして未だ平社員」</li>
</ul>
</p>

</div>



<div>
  <h1>今日は第2回 「プログラミング言語の基礎概念」読書会の日です</h1>
<div class="post-info">
    Posted on <a href="./posts/2015-08-23-heyhey_haskell.html">August 23, 2015</a>
    <!-- facebook button -->
    <div class="fb-like" data-href="http://hiratara.github.io/posts/2015-08-23-heyhey_haskell.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
    <!-- Twitter button -->
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiratara.github.io/posts/2015-08-23-heyhey_haskell.html" data-text="今日は第2回 「プログラミング言語の基礎概念」読書会の日です" data-via="hiratara">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

</div>
<p>
    <p><a href="http://sampou.connpass.com/event/18159/">第2回 「プログラミング言語の基礎概念」読書会</a>に来ています。音読方式なので、議論を中心にメモします。</p>
<h2 id="章メタ定理と帰納法による証明">2章メタ定理と帰納法による証明</h2>
<ul>
<li>公理と原理の違いは？
<ul>
<li>公理という言葉が出てこない？</li>
<li>「公理的意味論」って言葉はありそう</li>
<li>元の言葉がprincipleだったのでは</li>
<li>「数学的帰納法」は証明できない？ → できない。公理っぽい</li>
<li>agda : データ型に対する構造帰納法がビルトインで入っているから？</li>
<li>coqはともかくagdaは自分で書かなきゃいけない？</li>
<li>agdaはfixを書くことができない</li>
<li>データ構造に沿った再帰と帰納法は同じ</li>
</ul></li>
</ul>
<h2 id="natとcomparenat1-3に関するメタ定理">2.1.1 NatとCompareNat1-3に関するメタ定理</h2>
<ul>
<li>定理 2.11
<ul>
<li><span class="math inline">\(S(n)\)</span> は任意の自然数？ (<code>0</code>は自然数に入るか問題)</li>
<li>CompareNat2 では公理</li>
</ul></li>
<li>定理 2.12
<ul>
<li><span class="math inline">\(S\)</span>を剥がしても大小関係は変わらない</li>
</ul></li>
<li>Comparenat 1-3 で特別なものはあるの？
<ul>
<li>違いはない</li>
<li>証明するものによっては向き不向きはある</li>
</ul></li>
<li>定理2.14はどのくらい示せばいい？
<ul>
<li><ol style="list-style-type: decimal">
<li>→ (2) → (3) だけ示せば</li>
</ol></li>
</ul></li>
</ul>
<h2 id="evalnatexp-に関するメタ定理">2.1.2 EvalNatExp に関するメタ定理</h2>
<h2 id="reducenatexp-に関するメタ定理">2.1.3 ReduceNatExp に関するメタ定理</h2>
<ul>
<li>定理2.22が間違えている
<ul>
<li><span class="math inline">\(e_2\)</span> と <span class="math inline">\(e_3\)</span> がペアノ自然数まで簡約されてたら成り立たない？</li>
<li><span class="math inline">\(e_2\)</span> と <span class="math inline">\(e_3\)</span> がペアノ自然数ではない、という条件がいる</li>
<li><span class="math inline">\(\to\)</span> は1ステップだが、きちんと1ステップで合流はできる</li>
</ul></li>
<li>定理2.24
<ul>
<li>自明では？ → この場合は自明でしょう</li>
<li>自明ではない作り方はできるの？</li>
<li><span class="math inline">\(\to_d\)</span> で <span class="math inline">\(\to^*\)</span> で定義した場合の違いとか</li>
<li><span class="math inline">\(\to_d\)</span> で <span class="math inline">\(\to\)</span> を模倣できる</li>
</ul></li>
<li>定理2.26はどう示す？
<ul>
<li>サイズのようなものを定義し、必ず減ることを示す</li>
<li>演算子の個数、がよさそう</li>
<li>プログラム意味論の本では型について帰納法使ってたけど → この推論規則では型とかはないので</li>
<li>型なしラムダ計算では強正規化可能性はなりたたない(だから型が必要)
<ul>
<li><span class="math inline">\((\lambda x.x x) (\lambda x.x x)\)</span></li>
</ul></li>
</ul></li>
</ul>
<h2 id="数学的帰納法">2.2 数学的帰納法</h2>
<ul>
<li><span class="math inline">\(\sum_{i=1}^0 i\)</span> は定義できるのか → 定義は怪しいけど、<span class="math inline">\(i=0\)</span>入れても変わらないのはまあそうだよね</li>
<li>例2.31 : なんでこうなるか不思議(意味は分かるけど直観的ではないという意味で)</li>
</ul>
<h2 id="構造帰納法">2.3 構造帰納法</h2>
<ul>
<li><span class="math inline">\(Z \operatorname{plus} n_2 \operatorname{is} n_3\)</span> と <span class="math inline">\(Z \operatorname{plus} n_2 \operatorname{is} n_4\)</span> が成り立つときに <span class="math inline">\(n_3 \equiv n_4\)</span> は言っていいの？
<ul>
<li>Natの4つしかルールは使えない</li>
<li>「はずである」にその気持ちが入っているのでは</li>
</ul></li>
<li>Haskellでexistsどうするのみたいな話</li>
<li>「P-ZEROの形より」をHaskellで表現するには
<ul>
<li><code>case</code> で場合分けで矛盾では</li>
<li>inductive ではないのでHaskellでは無理でしょう ( <code>undef</code> あるし)</li>
</ul></li>
</ul>
<h2 id="算術式に関する構造帰納法">2.3.2 算術式に関する構造帰納法</h2>
<ul>
<li>原理2.33が何を言っているのか
<ul>
<li>オペラントについてある性質が言えれば、<code>+</code>や<code>*</code>したものも性質が言える。という状態ならすべての算術式について成り立つ</li>
<li>自然数と違って再帰の仕方が木となる</li>
</ul></li>
<li>図2.3は<span class="math inline">\(Z*S(S(Z))+S(Z)\)</span>を言いたいだけ</li>
</ul>
<h2 id="帰納法による定義">2.4 帰納法による定義</h2>
<ul>
<li>関数って？
<ul>
<li>同じ値について同じ値をただ一つだけもつ</li>
</ul></li>
<li>閉包性 == 全域性</li>
<li>s/定義2.4/定義2.35/</li>
</ul>
<h2 id="導出に関する帰納法">2.5 導出に関する帰納法</h2>
<ul>
<li>導出のツリーを帰納法している</li>
<li>導出の部分を省略するのは？？
<ul>
<li>導出規則が帰納法に適していない場合は省略できない(というか帰納法にならない)</li>
<li>わかっているなら省略してもいい</li>
</ul></li>
<li>読み替えたところが肝</li>
</ul>
<h2 id="整礎帰納法">2.6 整礎帰納法</h2>
<ul>
<li>整礎性は集合の性質ではなく集合と順序を合わせた性質</li>
<li><code>0</code> は？ → 極小元。前提が <span class="math inline">\(\phi\)</span> になる</li>
</ul>
<p>今日は２章まで。</p>
</p>

</div>



<p>…or you can find more in the <a href="./archive.html">archives</a>.

      </div>
    </div>
    <div id="content_footer"></div>
    <div id="footer">
      <p><a href="./">Home</a> | <a href="./about.html">About</a> | <a href="./contact.html">Contact</a> | <a href="./archive.html">Archive</a></p>
      <p>Copyright &copy; hiratara | <a href="http://validator.w3.org/check?uri=referer">HTML5</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> | <a href="http://www.html5webtemplates.co.uk">Free CSS Templates</a> | <a href="http://jaspervdj.be/hakyll">Hakyll</a></p>
    </div>
  </div>
</body>
</html>
