<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Born in Tomakomai city - 今日は YAPC::Asia 2014 Reject con の日です</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        
        <!-- Google Analytics tracking codes -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-7637699-4', 'hiratara.github.io');
          ga('send', 'pageview');

        </script>
    </head>
    <body>
        <!-- facebook SDK -->
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=100848266724416";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

        <div id="header">
            <div id="logo">
                <a href="../">Born in Tomakomai city</a>
            </div>
            <div id="navigation">
                <a href="../">Top</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1><a href="../posts/2014-09-03-YAPCAsia2014_rejects.html">今日は YAPC::Asia 2014 Reject con の日です</a></h1>

<div class="info">
    Posted on September  3, 2014
    
    <!-- Twitter button -->
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="/posts/2014-09-03-YAPCAsia2014_rejects.html" data-text="今日は YAPC::Asia 2014 Reject con の日です" data-via="hiratara">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <!-- facebook button -->
    <div class="fb-like" data-href="/posts/2014-09-03-YAPCAsia2014_rejects.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
</div>

<p><a href="http://www.zusaar.com/event/14507005">YAPC::Asiaのreject con</a>に参加します。自分用に執ったメモを公開しておきます。</p>
<h2 id="papix__さん-オープニング"><span class="citation">@__papix__さん</span> / オープニング</h2>
<ul>
<li>トークで落ちて悔しいって言ってたら開催の運び</li>
<li>悔しい5人と飛び入りLT</li>
<li>乾杯！</li>
</ul>
<h2 id="ytnobody-tsucchi-さんこれはormですか-いいえotogiriです---基礎編"><span class="citation">@ytnobody</span> &amp; <span class="citation">@tsucchi</span> さん｢これはORMですか? いいえOtogiriです - 基礎編｣</h2>
<h3 id="ytnobodyさん"><span class="citation">@ytnobodyさん</span></h3>
<ul>
<li>これゾン関係ない</li>
<li>DBIx::Sunny + SQL::Maker</li>
<li>ORM
<ul>
<li>車輪の再発明。麻疹の一種</li>
</ul></li>
<li>動機
<ul>
<li>TengはSchema書くのがおっくう</li>
<li>TengはSchema::Dumperで自動生成できる</li>
<li>自動生成されたコードに TYPE =&gt; 4 みたいなマジックナンバーが</li>
<li>SQL::Translator::Producer::Teng でよくなる</li>
<li>テーブル変更頻繁だし、そこに手間かけたくない</li>
</ul></li>
<li>OogiriはSchmaがないので、面倒事がない
<ul>
<li><code>strict =&gt; 0</code> を指定しないと、Hash-refが食わせられなかったり</li>
<li>select, updateはTengっぽい</li>
<li>transactionやinflateのサポート</li>
</ul></li>
<li>デフォルトではstrict 1
<ul>
<li>decode_json したものは食わせられない</li>
<li>SQL::QueryMakerが提供する関数群がexportされるので、それを使う</li>
</ul></li>
<li>行数少ない。合計で200行以下</li>
</ul>
<h3 id="tsucchiさん-otogiriの話応用編"><span class="citation">@tsucchiさん</span> Otogiriの話応用(?)編</h3>
<ul>
<li>SQL::Executor みたいの作ってた
<ul>
<li>似てるけど、DBIx::Sunnyベースじゃない</li>
<li>一年くらいOtogiriに乗っかってる</li>
</ul></li>
<li>Otogiri::Plugin
<ul>
<li><code>Otogiri::Plugin::DeleteCascade</code> → FKを辿って親も消す。<code>delete_cascade()</code></li>
<li>Otogiriの名前空間にメソッド生やす</li>
<li>TableInfo (show tables), BulkInsert, WueryWithNamedPlaceholder</li>
</ul></li>
<li>OtogiriとReplyの組み合わせ
<ul>
<li>Reply は irb 的なの。repl</li>
<li>Otogiri::Plugin::DataDumperAutoEncode → 自動でエンコード</li>
<li>Reply::Plugin::ORM → Reply環境でotogiriが使える</li>
</ul></li>
<li>デモ
<ul>
<li>TableInfo, Desc, Selectの例</li>
<li>Delete_cascadeも便利</li>
</ul></li>
<li>oracleのクライアントの代わりに使ったりinflateと組み合わせると便利かもね</li>
<li>今後
<ul>
<li>Pluginで便利なものはコアに引き上げたいな</li>
<li>Pluginのグルーピングしたいな</li>
</ul></li>
<li>質疑応答
<ul>
<li>Q. Tengのスキーマローダーとか使えばいい。O/Rマッパー書く人なら知ってるよね (<a href="https://twitter.com/tokuhirom/status/507129417852674049">ニュアンス違いそうです</a>、すみません)</li>
<li>A. 麻疹なんで</li>
</ul></li>
</ul>
<h2 id="papix__-さん帰ってきたpercuda-perlとgpgpuが出会い-そして未来へ"><span class="citation">@__papix__</span> さん｢帰ってきたPerCUDA 〜PerlとGPGPUが出会い, そして未来へ〜｣</h2>
<ul>
<li>画面つながらない → 再起動したら直った！</li>
<li>1年前にPerCUDA構想の話をした
<ul>
<li>PerlのコードのみでGPGPUをつくろうとした</li>
<li>一ヶ月でできた→卒業</li>
<li>職質テックトークのmoznionさんの会を参照</li>
</ul></li>
<li>YAPCのトークで落選した</li>
<li>GPGPUへの注目
<ul>
<li>64〜128個のコア「今は4000以上あるよ！ちゃんと調べて！！」</li>
<li>EC2でもある（高い）</li>
</ul></li>
<li>CUDA、OpenCLなどがある
<ul>
<li>静的型付けになっちゃう</li>
<li>知識必要</li>
</ul></li>
<li>スクリプト言語でのマッピング (Ruby、Python、Perlなど)
<ul>
<li>楽なんじゃね？</li>
<li>PyCUDA、Pynvvm は有名</li>
<li>ParaRuby, Ikra(RubyコードからCを自動生成</li>
</ul></li>
<li>Perl
<ul>
<li>KappaCUDA、ExtUtils::nvcc、OpenCL、CUDA::Minimal</li>
<li>PerCUDA → PerlのコードをGPUコードに自動変換
<ul>
<li>GPUないときは、pure perlで実行(MBAにはないよ)</li>
<li>1200倍高速に！</li>
</ul></li>
</ul></li>
<li>CPU側処理とGPU側処理を切り分けて実装する必要
<ul>
<li>CPUとGPUのメモリが共通ではないので</li>
</ul></li>
<li>CUDA
<ul>
<li>NVIDIAが提供するGPGPUフレームワーク</li>
<li>CUDA C言語とCUDA API</li>
<li>NVCCコンパイラもある</li>
<li>llvmを使ってるので、通常のCやFortranでも使える</li>
</ul></li>
<li>LLVM
<ul>
<li>Clang</li>
<li>LLVM IRを介すので、言語、アーキテクチャに依存しない</li>
<li>変換フェーズでの最適化がいい感じ</li>
</ul></li>
<li>Compiler::CodeGenerator::LLVM → Perl コードをLLVM IRへ
<ul>
<li>使えない構文が多いので見送り</li>
</ul></li>
<li>PerCUDA
<ul>
<li>変換系と実行系にわかれている</li>
<li>PTXに変換して、GPU実効しない場合はPerlの通常の関数を呼ぶ</li>
<li>正規表現でCに変換している(！)</li>
<li>GPUでじっこうした結果をまたPerlでラップする</li>
<li>CUDAのAPIでGPUを操作</li>
</ul></li>
<li>1024x1024の行列の乗算は1000倍以上(生CUDAの方が5倍くらい速いけど)
<ul>
<li>Perlのデータ変換が遅い</li>
</ul></li>
<li>極悪な正規表現があっても大学院は終了できる</li>
<li>今後
<ul>
<li>GPUの値段が下がっている</li>
<li>Imager的なものをGPUでやろうとしてたけど</li>
<li>GPGPU坂をよ</li>
</ul></li>
<li>質疑応答
<ul>
<li>Q. OpenCLの予定は？</li>
<li>A. ないです</li>
<li>Q. 型あまりよくないですよ</li>
<li>A. 型ないと動かないですよ</li>
<li>Q. あの正規表現ずっとあるんですけどなんとかならないですか</li>
<li>A. 時間がなかったのです</li>
</ul></li>
</ul>
<h2 id="punytan-さんmodel-layer-development-tips"><span class="citation">@punytan</span> さん｢Model Layer Development Tips｣</h2>
<ul>
<li>バリデーション、DB、テストをなんとかする</li>
<li>バリデーション
<ul>
<li>Mouse::Util::TypeConstraints</li>
<li>subtypeを使って、文字列や自然数などを</li>
</ul></li>
<li>Data::Validatorを使うとよい</li>
<li>Internals::SvREADONLY は悲しいことになる
<ul>
<li>NoRestricted を使うといい</li>
<li>ないキーにアクセスすると落ちる</li>
<li>「それをチェックしたいからそうしてるのでは」「xorとかしているときは厳しい」</li>
</ul></li>
<li>SQLの生成にはSQL::Formatを使う</li>
<li>DBIx::HandlerでDBに接続する
<ul>
<li>コネクションハンドリング、scopeベース</li>
<li>fork safeなのでpreforkの時は必須</li>
<li>txnメソッドでトランザクション</li>
</ul></li>
<li>DBIのマニアックなメソッド
<ul>
<li>selectrow_<em>ref, selectall_</em>ref</li>
</ul></li>
<li>DBIx::QueryLog
<ul>
<li>開発中に、どんなクエリを出してるか見る</li>
<li>colorとかcompactとかexplainは便利</li>
</ul></li>
<li>テスト → コンパイル、データ、prove、高速化
<ul>
<li>Test::LoadAllModules → 全部ロードしてコンパイルチェック</li>
<li>Test::MOre、Test::Deep、Test::Deep::Matcher → データのチェック
<ul>
<li>superhashofとか</li>
</ul></li>
<li>Test::Pretty → proveの結果を見やすく。<code>prove -Pretty</code></li>
<li>Test::Docker::MySQL → Dockerコンテナでテストを速く
<ul>
<li><code>$guard-&gt;get_port</code> でおｋ</li>
<li>スキーマやフィクスチャを事前用意しておくとよい</li>
</ul></li>
</ul></li>
<li>Alpaca.pm
<ul>
<li>モデルフレームワーク</li>
<li>Proof of Conceptを実装</li>
<li>モデルにフォーカス</li>
<li>大量のデータベースを扱える(スケーラブル)</li>
<li>ビルトインのテストフレームワーク</li>
</ul></li>
<li>例えば、ブログの記事の読み込み
<ul>
<li>DB定義、型のバリデーション、ロジックを書く</li>
<li>テスト → テーブルロード、実行</li>
<li>cmpとかis_deeplyとかはデータのdumpがでなくて不便</li>
<li>スロークエリのハイライトとか</li>
<li>kamipoさんがmysql casualで話してたアレ（？）を使いたい</li>
</ul></li>
<li>デモ → さっきまでは動いてたんだけど</li>
<li>質疑応答
<ul>
<li>Q. Test::DockerMysqlDは使ってます?</li>
<li>A. 今はまだ。使えると思う</li>
<li>Q. セットアップが面倒なのはどうする？</li>
<li>A. 頑張る</li>
<li>Q. Test::Prettyを使うと壊れてしまうようなテストはどうする？</li>
<li>A. そういうときはTest::Prettyを使わない</li>
</ul></li>
</ul>
<!--
## @xtetsuji  さん｢今に伝えるメールの技術｣
## @saisa6153 さん ｢今から始めるレガシーコード改善レポート｣
## LTタイム
### @mala さん「」
### @note103 さん「」
### @karupanerura さん「」
### @xaicron さん「」
-->



        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
