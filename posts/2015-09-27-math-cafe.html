<!DOCTYPE HTML>
<html>

<head>
  <title>Born in Tomakomai city - 今日は 数学カフェ の日です</title>
  <meta name="description" content="A blog for programmer" />
  <meta name="keywords" content="perl,haskell,mathematics" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="../css/style.css" />
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <!-- Google Analytics tracking codes -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-7637699-4', 'hiratara.github.io');
          ga('send', 'pageview');

        </script>
</head>

<body>
        <!-- facebook SDK -->
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=100848266724416";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>
  <div id="main">
    <div id="header">
      <div id="logo">
        <div id="logo_text">
          <h1><a href="../">Born in <span class="logo_colour">Tomakomai</span> city</a></h1>
          <h2>A programmer who loves mathematics</h2>
        </div>
      </div>
      <div id="menubar">
        <ul id="menu">
          <li><a href="../">Home</a></li>
          <li><a href="../about.html">About</a></li>
          <li><a href="../contact.html">Contact</a></li>
          <li><a href="../archive1.html">Archive</a></li>
        </ul>
      </div>
    </div>
    <div id="content_header"></div>
    <div id="site_content">
      <div class="sidebar">
        <h3>Links</h3>
        <ul>
          <li><a href="https://github.com/hiratara">hiratara@github</a></li>
          <li><a href="http://d.hatena.ne.jp/hiratara">hiratara@hatena</a></li>
          <li><a href="http://hiratara.dyndns.org/chaberi">Chaberi Backdoor</a></li>
        </ul>
      </div>
      <div id="content">
        <h1>今日は 数学カフェ の日です</h1>
<div class="post-info">
    Posted on <a href="../posts/2015-09-27-math-cafe.html">September 27, 2015</a>
    <!-- facebook button -->
    <div class="fb-like" data-href="http://hiratara.github.io/posts/2015-09-27-math-cafe.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
    <!-- Twitter button -->
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiratara.github.io/posts/2015-09-27-math-cafe.html" data-text="今日は 数学カフェ の日です" data-via="hiratara">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

</div>
<p>
    <p><a href="https://www.facebook.com/mathcafejapan">数学カフェ</a> に来ていますので、メモを残しておきます。</p>
<ul>
<li>就職しても数学を学びたい、これからを就職する学生さん、数学好きな女性を増やしたい</li>
<li>今日はデータサイエンスの数学的な部分をきちんとやりたい</li>
</ul>
<h2 id="pseudo_finite-さんデータ分析における数理最適化---前半"><span class="citation">@pseudo_finite</span> さん「データ分析における数理最適化」 - 前半</h2>
<ul>
<li>学生時代は数理論理学やってた
<ul>
<li><span class="math inline">\(N + Z\)</span> もペアノの公理を満たす(前の数取れるので)</li>
</ul></li>
<li>「データサイエンティスト」ではなく「研究員」</li>
<li>データ分析
<ul>
<li>wikipedia : データを用いて分析</li>
<li>ビジネス : 意思決定・施策
<ul>
<li>現象を知る、施策を打つ</li>
<li>データの元となる現象を解明</li>
</ul></li>
</ul></li>
<li>データ分析の結果を誰が使うか
<ul>
<li>経営 : モニタリング・ざっくりした結果</li>
<li>現場 : アナリスト的</li>
<li>システム : プログラマ寄り・機械に落とし込む</li>
</ul></li>
<li>現象・施策のバランス == ビジネスインパクト
<ul>
<li>「日経平均と強い相関」コントロールできない、施策が打てない</li>
</ul></li>
<li>レコメンデーション
<ul>
<li>Conversion UP、(顧客|店舗)満足度UP</li>
<li>例: ホテル、本、ニュース、不動産、異性、広告、SNSの友達</li>
<li>商品を個人へ？ クラスタリング？</li>
</ul></li>
<li>レコメンデーション戦略
<ul>
<li>データ: 顧客・商品・属性、履歴、事前知識</li>
<li>シーン : タイミング、個数</li>
</ul></li>
<li>技術
<ul>
<li>協調フィルタリング、LR、SVM、隠れ状態系(NMF、pLSA、LDA)、数理最適化、RF-確率表</li>
<li>隠れ状態系はあまり現場で使われてない</li>
<li>スコアのテーブルを作るのが目標</li>
</ul></li>
<li>RF-確率表
<ul>
<li>タスク例 : 10週間のログから、顧客が閲覧する物件を予測 (TOP N レコメンド)</li>
</ul></li>
<li>分析の流れ
<ul>
<li>データクレンジング
<ul>
<li>BOT(はずれ値)、0/1 のカラムに日本語が入ってる(QUERY STRINGを生で突っ込んでるとか)</li>
<li>苦行。ロジック実装後にクレンジングすることもよくある</li>
</ul></li>
<li>可視化・基礎集計 (分析の方針を決定する)</li>
<li>分析用DBを作成</li>
<li>特徴量を洗い出したり</li>
</ul></li>
<li>可視化
<ul>
<li>人間が理解しやすい形に</li>
<li>1万ユーザくらいテキストファイルにして見る。通勤電車で1,000ユーザくらいずつ</li>
</ul></li>
<li>RF-確率表 : RecencyとFrequencyで確率を出す
<ul>
<li>実績値を確率とする？</li>
<li>単調性制約 : Recencyが小さい、Frequencyが大きいほど閲覧、という仮定</li>
<li>実績値は単調性制約を満たさない　(オーバーフィッティング)</li>
<li>確率表を推定する！</li>
</ul></li>
<li>確率表の推定
<ul>
<li>単調性制約を満たす</li>
<li>データ件数が多いセルの閲覧確率は信頼</li>
<li><span class="math inline">\(p_{ij}\)</span> 実績。 <span class="math inline">\(x_{ij}\)</span> 推定。</li>
<li>単調性制約を入れる</li>
<li>数理最適化問題として、ソルバーで解く</li>
</ul></li>
<li>RF-確率表のまとめ
<ul>
<li>実装が簡単</li>
<li>チューニングがいらない (ノンパラメトリック)</li>
<li>運用が現実的</li>
</ul></li>
<li>Q. 小数データというのは、個々人で再現してデータが少ないから？
<ul>
<li>A. この案件は大規模だから気にしなくていい。小規模な応用とか、商品の違いとかでデータが減る</li>
</ul></li>
<li>Q. Recencyとか冪分布になりそう。
<ul>
<li>A. 対数分布になりそうだけどやってない。ECサイトによって減衰が違うはず。関数形を仮定しなくていい</li>
</ul></li>
<li>Q. ロングテールが問題になりそうだけど？
<ul>
<li>A. 気にしてない。時計とかだとなりそう。不動産だと1 conversionで終わりとか。</li>
</ul></li>
<li>Q. binの切り方を工夫した方がいいのでは？
<ul>
<li>A. 課題はあるのか優先順位は低い。FとRをどうとるか。</li>
</ul></li>
<li>Q. 一定数溜まったbinのみを使うとかしない？
<ul>
<li>A. 議論はあった。1次元は簡単。2次元だと・・・。簡単さを求めているが、将来はやりたい</li>
</ul></li>
<li>制約付きレコメンデーション
<ul>
<li>TOP Nではなく、バランスを考慮したリコメンドが必要</li>
<li>1つの商品ではなくいろんな商品を売りたい</li>
<li>売れ行き悪い商品の援護</li>
<li>過剰レコメンドの抑制(店舗の課金を加味。いいホテルは勝手に売れる)</li>
<li>顧客のリピート率、顧客育成</li>
</ul></li>
<li>例えば、各商品の期待利得を1000円以上とか
<ul>
<li><span class="math inline">\(x_{ui}\)</span> user×itemの割り当てテーブル、<span class="math inline">\(e_{ui}\)</span> CV期待値</li>
<li>商品数<span class="math inline">\(\sum{x_{ui}}\)</span> や 期待コンバージョン数 <span class="math inline">\(\sum{x_{ui}e_{ui}}\)</span> に制約</li>
</ul></li>
<li>素直なモデルの問題
<ul>
<li>CV数が現実的ではなく解がない</li>
<li>変数のオーダーが10,000オーダーでソルバが厳しい
<ul>
<li>100顧客×100商品・・・</li>
</ul></li>
<li>レコメンド可能商品を絞ると1,000顧客にはできるけど・・・</li>
<li><span class="math inline">\(p_i\)</span> を追加。CV目標の違反量。これを重みづけして混ぜて最適化
<ul>
<li>連続変数が入るので問題は難しくなっている</li>
</ul></li>
</ul></li>
<li>列生成法とラグランジュ緩和法を組み合わせる
<ul>
<li>10,000顧客まで解けるように</li>
<li>Oracle, Primal*, QUERY を反復する</li>
<li><span class="math inline">\(P\)</span> パターン集合、 <span class="math inline">\(g_{uip}\)</span> CV期待値</li>
<li>ラグランジュ乗数でCV目標制約を制御</li>
<li>ラグランジュ緩和問題が下界を与える</li>
<li>item×userから、userごとの制約に書き換えられる</li>
<li>反復回数は10回、40～50回</li>
</ul></li>
</ul>
<h2 id="cm数理女子">CM「数理女子」</h2>
<p><a href="http://www.math.keio.ac.jp/~suuri-joshi/">数理女子</a>。女性が数学を勉強するための障壁をなくしたい。数学を使っている女性で記事などを執筆してくれる方募集。</p>
<p>「都内数学科学習連合にも女性居ますよ」</p>
<h2 id="pseudo_finite-さんデータ分析における数理最適化---後半"><span class="citation">@pseudo_finite</span> さん「データ分析における数理最適化」 - 後半</h2>
<ul>
<li>雑談 : 研究者が社会に出るときに知っておくとすっきりすること
<ul>
<li>研究者
<ul>
<li>正しいことを好む</li>
<li>すべての事実を話す</li>
<li>面白い研究テーマを好む</li>
<li>挑戦的な問題を好む</li>
<li>論文を書く</li>
</ul></li>
<li>実務家
<ul>
<li>ベストな選択を選ぶ</li>
<li>必要な事実を話す</li>
<li>顧客が好むサービスを好む</li>
<li>リスクのある仕事を嫌う</li>
<li>売上を出す</li>
</ul></li>
</ul></li>
<li>文書要約
<ul>
<li>google検索の結果(スニペット文)、国語試験の要約、書き込みの要約、ニュースサイトのトピック、論文サーベイ、あらすじ、アブスト、新幹線車内電光掲示板</li>
<li>「夢」よりも「シビア」</li>
<li>ジャンル、カテゴリ、著者で手法が分かれる
<ul>
<li>記者が書いたものは、だいたいヘッドラインが要約として抽出される</li>
</ul></li>
<li>ルール: 字数制限 or 要約率</li>
<li>要約はなぜ必要？ : 時間がない。要約にはスキルが必要</li>
</ul></li>
<li>Twitterのキーワード検索による1000ツイートを要約
<ul>
<li>動機: ニュースをざっくり知る、キーワードの観測</li>
<li>多数派の意見を冗長性なく</li>
</ul></li>
<li>データクレンジング
<ul>
<li>日本語は形態素解析が必要なので難しい</li>
<li>日本語の活用</li>
<li>RTなど</li>
</ul></li>
<li>単語文書行列 : 文書×語彙の頻度</li>
<li>TF(Term Frequency) * IDF(Inverse Document Frequency)
<ul>
<li>IDFは単語の出現数の逆数をlogをとったもの(多くの文書に現れる単語は特徴的でない)</li>
</ul></li>
<li>要約にドキュメントを含めるか<span class="math inline">\(x_d\)</span> 要約に語が選択されているか<span class="math inline">\(y_w\)</span>
<ul>
<li>面積を最大化する</li>
<li>tfidf値を利用する</li>
</ul></li>
<li>文字数は制約式。 <span class="math inline">\(y_w\)</span> の選定も制約式で行う</li>
<li>実際に分析した例:
<ul>
<li>素数 : 素数を数えて落ち着くんだ系</li>
<li>フォルクスワーゲン、鬼怒川 : ニュースのヘッドラインなど</li>
</ul></li>
<li>レビューの文書要約とかは商品買うのにいいかも</li>
<li>良い数理モデリング
<ul>
<li>データの特徴を捉えている</li>
<li>定式化とアルゴリズムがタスクにハマっている</li>
<li>「センスが必要」。基本が大事。</li>
</ul></li>
<li>Q. 文書要約で数理最適化を使うのはよくある手法？
<ul>
<li>A. はい。研究されている方も</li>
</ul></li>
<li>Q. Oracle の変形で <span class="math inline">\(p_i\)</span> が <span class="math inline">\(0\)</span> になる理由は？
<ul>
<li>A. 制約が入ってないから</li>
</ul></li>
<li>Q. 反復の計算量のスケールは？
<ul>
<li>A. マシンスペックはノートPC(メモリ4GB程度)</li>
<li>A. 反復6回で1日以上かかってる。序盤のイテレーションは数時間</li>
</ul></li>
<li>Q. Oracleの問題を速く解くように設定する？
<ul>
<li>A. Oracleは問題規模が小さくなってるから余裕。Primal*が規模が大きい</li>
</ul></li>
<li>Q. 数理モデルのセンスの身に着け方は？
<ul>
<li>A. データをよく見る。実装。入力データをぶらす。</li>
<li>A. 数理計画の立場から見ると、正規分布で済ます、のが違和感がある</li>
<li>A. 常にモデリングを心がける。土地勘を身に着けるためにまずいろいろ知る</li>
</ul></li>
<li>Q. モデルがあっているかの検証はどうしている？
<ul>
<li>A. 正解データを用意している。SVMやロジスティック回帰と比較はしてる。PR、F値で見る。min avg precision。本当に単調現象なのかとかを統計的に検定したいがやってない</li>
<li>A. 元々統計畑ではないので。</li>
</ul></li>
</ul>
<p>その後、ソーシャルに書けない大人の話をもろもろ。</p>
<h2 id="simizut22-さん代数トポロジー入門"><span class="citation">@simizut22</span> さん「代数トポロジー入門」</h2>
<ul>
<li><a href="https://twitter.com/search?q=世界に代数トポロジーの光を">世界に代数トポロジーの光を</a></li>
<li>学部レベルの内容</li>
<li>曲面のMorse理論。cell複体のhomology</li>
<li>やらないとこ「多様体、一般ホモロジー、離散Morse,、単体的、層」</li>
<li>臨界点、退化と非退化(2次導関数が0かどうか)
<ul>
<li>2変数関数では∇=0</li>
<li>退化については Hesse行列が生息か否か</li>
<li><span class="math inline">\(xy\)</span> と <span class="math inline">\(x^2 - y^2\)</span> は座標変換で移りあう</li>
</ul></li>
<li>Morseの捕題
<ul>
<li>非退化臨界点の周りでは<span class="math inline">\(x^2+y^2\)</span> <span class="math inline">\(x^2-y^2\)</span> <span class="math inline">\(-x^2-y^2\)</span>のいずれかでかける</li>
</ul></li>
<li>非退化臨界点の指数 → 0, 1, 2 (Morseの捕題の局所座標表示によるマイナス係数の個数)</li>
<li>今日は2次元閉多様体の話</li>
<li>局面上の関数の臨界点・退化性は局所座標で (局所座標の取り方によらない)</li>
<li>Morse関数 : <span class="math inline">\(f : M \to R\)</span> がMorse関数 def 全ての臨界点が非退化
<ul>
<li>閉曲面上の Morse関数の臨界点は高々有限</li>
<li>Mがコンパクトなのでfは最大・最小値をとる</li>
</ul></li>
<li><span class="math inline">\(S^2\)</span>上の高さ関数 <span class="math inline">\(h(x, y, z) = z\)</span> Morse関数</li>
<li>閉曲面M上に臨界点が2つだけのMorse関数が存在すれば、Mは球面と微分同相
<ul>
<li>7次元以上だと微分同相とは限らない</li>
</ul></li>
<li>曲面のハンドル分解
<ul>
<li>閉曲面上のMorse関数 <span class="math inline">\(M_t\)</span> 下の部分、 <span class="math inline">\(L_t\)</span> 等高線を定義</li>
<li>Morse関数は閉曲面上の高さ関数と見れる</li>
</ul></li>
<li>gradient like vector field</li>
<li><span class="math inline">\(c_0 \in R\)</span> が fの臨界値</li>
<li><span class="math inline">\(M_b ~= M_c\)</span> 微分同相
<ul>
<li>臨界値の前後の様子だけみればいい <span class="math inline">\(M_{[c - \epsilon, c + \epsilon]}\)</span></li>
<li>指数によって <span class="math inline">\(D^2\)</span> が増えたり減ったりする</li>
<li>指数1の時に臨界点前後で向きが変わる</li>
<li>[0-2]handle</li>
<li>臨界点を通るたびにhandleが付け代わる</li>
<li>丙局面は有限個のhandleの和で表せる</li>
</ul></li>
<li>セル複体
<ul>
<li><span class="math inline">\(e^i\)</span> オープンとクローズなディスク(バーの有無)</li>
<li>0-dim 有限点</li>
<li><span class="math inline">\(h_i\)</span> 接着写像 <span class="math inline">\(e^i\)</span> の境界からYへの写像。をつかって帰納的に</li>
</ul></li>
<li>ハンドル体とセル複体は似てる</li>
<li>homotopy同値とは
<ul>
<li><span class="math inline">\(S^1 ~ R^2\)</span> は 一点とhomotopy同値ではない</li>
</ul></li>
<li>ハンドルとセルは1-1対応する</li>
<li>homotopy不変量についてはハンドル分解を用いて計算をしても問題ない</li>
<li>Q. 次回までに何をやればいい？
<ul>
<li>A. 多面体を三角形分解とかセル分解したり？</li>
</ul></li>
<li>Q. Morse関数の臨界点は有限ってのは病的な例は大丈夫？
<ul>
<li>A. compactなら大丈夫では？</li>
</ul></li>
<li>Q. 退化と非退化は曲率？
<ul>
<li>A. metric入ってないので</li>
</ul></li>
</ul>
</p>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'hiratara';
    var disqus_title = '今日は 数学カフェ の日です';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      </div>
    </div>
    <div id="content_footer"></div>
    <div id="footer">
      <p><a href="../">Home</a> | <a href="../about.html">About</a> | <a href="../contact.html">Contact</a> | <a href="../archive.html">Archive</a></p>
      <p>Copyright &copy; hiratara | <a href="http://validator.w3.org/check?uri=referer">HTML5</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> | <a href="http://www.html5webtemplates.co.uk">Free CSS Templates</a> | <a href="http://jaspervdj.be/hakyll">Hakyll</a></p>
    </div>
  </div>
</body>
</html>
