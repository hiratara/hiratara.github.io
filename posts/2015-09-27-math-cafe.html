<!DOCTYPE HTML>
<html>

<head>
  <title>Born in Tomakomai city - 今日は 数学カフェ の日です</title>
  <meta name="description" content="A blog for programmer" />
  <meta name="keywords" content="perl,haskell,mathematics" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="../css/style.css" />
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <!-- Google Analytics tracking codes -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-7637699-4', 'hiratara.github.io');
          ga('send', 'pageview');

        </script>
</head>

<body>
        <!-- facebook SDK -->
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=100848266724416";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>
  <div id="main">
    <div id="header">
      <div id="logo">
        <div id="logo_text">
          <h1><a href="../">Born in <span class="logo_colour">Tomakomai</span> city</a></h1>
          <h2>A programmer who loves mathematics</h2>
        </div>
      </div>
      <div id="menubar">
        <ul id="menu">
          <li><a href="../">Home</a></li>
          <li><a href="../about.html">About</a></li>
          <li><a href="../contact.html">Contact</a></li>
          <li><a href="../archive1.html">Archive</a></li>
        </ul>
      </div>
    </div>
    <div id="content_header"></div>
    <div id="site_content">
      <div class="sidebar">
        <h3>Links</h3>
        <ul>
          <li><a href="https://github.com/hiratara">hiratara@github</a></li>
          <li><a href="http://d.hatena.ne.jp/hiratara">hiratara@hatena</a></li>
          <li><a href="http://hiratara.dyndns.org/chaberi">Chaberi Backdoor</a></li>
        </ul>
      </div>
      <div id="content">
        <h1>今日は 数学カフェ の日です</h1>
<div class="post-info">
    Posted on <a href="../posts/2015-09-27-math-cafe.html">September 27, 2015</a>
    <!-- facebook button -->
    <div class="fb-like" data-href="http://hiratara.github.io/posts/2015-09-27-math-cafe.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
    <!-- Twitter button -->
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiratara.github.io/posts/2015-09-27-math-cafe.html" data-text="今日は 数学カフェ の日です" data-via="hiratara">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

</div>
<p>
    <p><a href="https://www.facebook.com/mathcafejapan">数学カフェ</a> に来ていますので、メモを残しておきます。</p>
<ul>
<li>就職しても数学を学びたい、これからを就職する学生さん、数学好きな女性を増やしたい</li>
<li>今日はデータサイエンスの数学的な部分をきちんとやりたい</li>
</ul>
<h2 id="pseudo_finite-さんデータ分析における数理最適化"><span class="citation">@pseudo_finite</span> さん「データ分析における数理最適化」</h2>
<ul>
<li>学生時代は数理論理学やってた
<ul>
<li><span class="math inline">\(N + Z\)</span> もペアノの公理を満たす(前の数取れるので)</li>
</ul></li>
<li>「データサイエンティスト」ではなく「研究員」</li>
<li>データ分析
<ul>
<li>wikipedia : データを用いて分析</li>
<li>ビジネス : 意思決定・施策
<ul>
<li>現象を知る、施策を打つ</li>
<li>データの元となる現象を解明</li>
</ul></li>
</ul></li>
<li>データ分析の結果を誰が使うか
<ul>
<li>経営 : モニタリング・ざっくりした結果</li>
<li>現場 : アナリスト的</li>
<li>システム : プログラマ寄り・機械に落とし込む</li>
</ul></li>
<li>現象・施策のバランス == ビジネスインパクト
<ul>
<li>「日経平均と強い相関」コントロールできない、施策が打てない</li>
</ul></li>
<li>レコメンデーション
<ul>
<li>Conversion UP、(顧客|店舗)満足度UP</li>
<li>例: ホテル、本、ニュース、不動産、異性、広告、SNSの友達</li>
<li>商品を個人へ？ クラスタリング？</li>
</ul></li>
<li>レコメンデーション戦略
<ul>
<li>データ: 顧客・商品・属性、履歴、事前知識</li>
<li>シーン : タイミング、個数</li>
</ul></li>
<li>技術
<ul>
<li>協調フィルタリング、LR、SVM、隠れ状態系(NMF、pLSA、LDA)、数理最適化、RF-確率表</li>
<li>隠れ状態系はあまり現場で使われてない</li>
<li>スコアのテーブルを作るのが目標</li>
</ul></li>
<li>RF-確率表
<ul>
<li>タスク例 : 10週間のログから、顧客が閲覧する物件を予測 (TOP N レコメンド)</li>
</ul></li>
<li>分析の流れ
<ul>
<li>データクレンジング
<ul>
<li>BOT(はずれ値)、0/1 のカラムに日本語が入ってる(QUERY STRINGを生で突っ込んでるとか)</li>
<li>苦行。ロジック実装後にクレンジングすることもよくある</li>
</ul></li>
<li>可視化・基礎集計 (分析の方針を決定する)</li>
<li>分析用DBを作成</li>
<li>特徴量を洗い出したり</li>
</ul></li>
<li>可視化
<ul>
<li>人間が理解しやすい形に</li>
<li>1万ユーザくらいテキストファイルにして見る。通勤電車で1,000ユーザくらいずつ</li>
</ul></li>
<li>RF-確率表 : RecencyとFrequencyで確率を出す
<ul>
<li>実績値を確率とする？</li>
<li>単調性制約 : Recencyが小さい、Frequencyが大きいほど閲覧、という仮定</li>
<li>実績値は単調性制約を満たさない　(オーバーフィッティング)</li>
<li>確率表を推定する！</li>
</ul></li>
<li>確率表の推定
<ul>
<li>単調性制約を満たす</li>
<li>データ件数が多いセルの閲覧確率は信頼</li>
<li><span class="math inline">\(p_{ij}\)</span> 実績。 <span class="math inline">\(x_{ij}\)</span> 推定。</li>
<li>単調性制約を入れる</li>
<li>数理最適化問題として、ソルバーで解く</li>
</ul></li>
<li>RF-確率表のまとめ
<ul>
<li>実装が簡単</li>
<li>チューニングがいらない (ノンパラメトリック)</li>
<li>運用が現実的</li>
</ul></li>
<li>Q. 小数データというのは、個々人で再現してデータが少ないから？
<ul>
<li>A. この案件は大規模だから気にしなくていい。小規模な応用とか、商品の違いとかでデータが減る</li>
</ul></li>
<li>Q. Recencyとか冪分布になりそう。
<ul>
<li>A. 対数分布になりそうだけどやってない。ECサイトによって減衰が違うはず。関数形を仮定しなくていい</li>
</ul></li>
<li>Q. ロングテールが問題になりそうだけど？
<ul>
<li>A. 気にしてない。時計とかだとなりそう。不動産だと1 conversionで終わりとか。</li>
</ul></li>
<li>Q. binの切り方を工夫した方がいいのでは？
<ul>
<li>A. 課題はあるのか優先順位は低い。FとRをどうとるか。</li>
</ul></li>
<li>Q. 一定数溜まったbinのみを使うとかしない？
<ul>
<li>A. 議論はあった。1次元は簡単。2次元だと・・・。簡単さを求めているが、将来はやりたい</li>
</ul></li>
<li>制約付きレコメンデーション
<ul>
<li>TOP Nではなく、バランスを考慮したリコメンドが必要</li>
<li>1つの商品ではなくいろんな商品を売りたい</li>
<li>売れ行き悪い商品の援護</li>
<li>過剰レコメンドの抑制(店舗の課金を加味。いいホテルは勝手に売れる)</li>
<li>顧客のリピート率、顧客育成</li>
</ul></li>
<li>例えば、各商品の期待利得を1000円以上とか
<ul>
<li><span class="math inline">\(x_{ui}\)</span> user×itemの割り当てテーブル、<span class="math inline">\(e_{ui}\)</span> CV期待値</li>
<li>商品数<span class="math inline">\(\sum{x_{ui}}\)</span> や 期待コンバージョン数 <span class="math inline">\(\sum{x_{ui}e_{ui}}\)</span> に制約</li>
</ul></li>
<li>素直なモデルの問題
<ul>
<li>CV数が現実的ではなく解がない</li>
<li>変数のオーダーが10,000オーダーでソルバが厳しい
<ul>
<li>100顧客×100商品・・・</li>
</ul></li>
<li>レコメンド可能商品を絞ると1,000顧客にはできるけど・・・</li>
<li><span class="math inline">\(p_i\)</span> を追加。CV目標の違反量。これを重みづけして混ぜて最適化
<ul>
<li>連続変数が入るので問題は難しくなっている</li>
</ul></li>
</ul></li>
<li>列生成法とラグランジュ緩和法を組み合わせる
<ul>
<li>10,000顧客まで解けるように</li>
<li>Oracle, Primal*, QUERY を反復する</li>
<li><span class="math inline">\(P\)</span> パターン集合、 <span class="math inline">\(g_{uip}\)</span> CV期待値</li>
<li>ラグランジュ乗数でCV目標制約を制御</li>
<li>ラグランジュ緩和問題が下界を与える</li>
<li>item×userから、userごとの制約に書き換えられる</li>
<li>反復回数は10回、40～50回</li>
</ul></li>
</ul>
<!--

## @ simizut22 さん

-->
</p>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'hiratara';
    var disqus_title = '今日は 数学カフェ の日です';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      </div>
    </div>
    <div id="content_footer"></div>
    <div id="footer">
      <p><a href="../">Home</a> | <a href="../about.html">About</a> | <a href="../contact.html">Contact</a> | <a href="../archive.html">Archive</a></p>
      <p>Copyright &copy; hiratara | <a href="http://validator.w3.org/check?uri=referer">HTML5</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> | <a href="http://www.html5webtemplates.co.uk">Free CSS Templates</a> | <a href="http://jaspervdj.be/hakyll">Hakyll</a></p>
    </div>
  </div>
</body>
</html>
